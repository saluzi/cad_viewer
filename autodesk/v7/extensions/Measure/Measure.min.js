/*!
 * LMV v7.1.0
 * 
 * Copyright 2019 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
Autodesk.Extensions.Measure=function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=359)}({1:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=function(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var s=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(n),a=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[i].concat(a).concat([s]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i}).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},s=0;s<this.length;s++){var a=this[s][0];"number"==typeof a&&(n[a]=!0)}for(s=0;s<e.length;s++){var o=e[s];"number"==typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),t.push(o))}},t}},2:function(e,t,i){var n={},s=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),a=function(e){var t={};return function(e,i){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,i);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),o=null,r=0,l=[],c=i(3);function h(e,t){for(var i=0;i<e.length;i++){var s=e[i],a=n[s.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](s.parts[o]);for(;o<s.parts.length;o++)a.parts.push(b(s.parts[o],t))}else{var r=[];for(o=0;o<s.parts.length;o++)r.push(b(s.parts[o],t));n[s.id]={id:s.id,refs:1,parts:r}}}}function d(e,t){for(var i=[],n={},s=0;s<e.length;s++){var a=e[s],o=t.base?a[0]+t.base:a[0],r={css:a[1],media:a[2],sourceMap:a[3]};n[o]?n[o].parts.push(r):i.push(n[o]={id:o,parts:[r]})}return i}function u(e,t){var i=a(e.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=l[l.length-1];if("top"===e.insertAt)n?n.nextSibling?i.insertBefore(t,n.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),l.push(t);else if("bottom"===e.insertAt)i.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var s=a(e.insertAt.before,i);i.insertBefore(t,s)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function m(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=function(){0;return i.nc}();n&&(e.attrs.nonce=n)}return g(t,e.attrs),u(e,t),t}function g(e,t){Object.keys(t).forEach(function(i){e.setAttribute(i,t[i])})}function b(e,t){var i,n,s,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var l=r++;i=o||(o=m(t)),n=f.bind(null,i,l,!1),s=f.bind(null,i,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(t,e.attrs),u(e,t),t}(t),n=function(e,t,i){var n=i.css,s=i.sourceMap,a=void 0===t.convertToAbsoluteUrls&&s;(t.convertToAbsoluteUrls||a)&&(n=c(n));s&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var o=new Blob([n],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}.bind(null,i,t),s=function(){p(i),i.href&&URL.revokeObjectURL(i.href)}):(i=m(t),n=function(e,t){var i=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,i),s=function(){p(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else s()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var i=d(e,t);return h(i,t),function(e){for(var s=[],a=0;a<i.length;a++){var o=i[a];(r=n[o.id]).refs--,s.push(r)}e&&h(d(e,t),t);for(a=0;a<s.length;a++){var r;if(0===(r=s[a]).refs){for(var l=0;l<r.parts.length;l++)r.parts[l]();delete n[r.id]}}}};var v=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}();function f(e,t,i,n){var s=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=v(t,s);else{var a=document.createTextNode(s),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}},283:function(e,t,i){var n=i(284);"string"==typeof n&&(n=[[e.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i(2)(n,s);n.locals&&(e.exports=n.locals)},284:function(e,t,i){var n=i(9);(e.exports=i(1)(!1)).push([e.i,"/* hover shouldn't work on mobile devices */\n.adsk-viewing-viewer .measure-length:hover.measure-length.enable-hover\n{\n\tbox-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\n\t-webkit-box-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\n    -moz-box-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\n}\n\n.adsk-viewing-viewer .measure-length {\n    display: none;\n    position: absolute;\n\n    height: 19px;\n\n    left: 0px;\n    top:  0px;\n\n    padding: 2px 0 2px 0;\n\n    background-color: #009bff;\n    box-shadow: 0px 1px 3px 1px rgba(0,0,0,0.25);\n\n    color: #f4f4f4;\n    font-size:12px;\n    text-align: center;\n    line-height: 1.2;\n    white-space: nowrap;\n\n    border-radius: 8px;\n    pointer-events: none;\n    cursor: pointer;\n    z-index: 2;\n\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n}\n\n.adsk-viewing-viewer .measure-length.visible {\n    display: block;\n}\n\n.adsk-viewing-viewer .measure-length.fetching-topology {\n    background-color: rgba(34, 34, 34, 0.8);\n    box-shadow: 0 0.5px 1.5px 0 rgba(0, 0, 0, 0.3);\n}\n\n.adsk-viewing-viewer .measure-length-text {\n    display: inline-block;\n    margin: 0 5px 0 5px;\n    vertical-align: middle;\n    font-size: 16px;\n    pointer-events: none;\n}\n\n.adsk-viewing-viewer .measure-delta-text {\n    margin: 0 5px 0 5px;\n    align-self: center;\n    font-size: 14px;\n\toverflow: hidden;\n\twhite-space: nowrap;\n\theight: 16px;\n\tline-height: 16px;\n\tvertical-align: middle;\n\tpointer-events: none;\n}\n\n.adsk-viewing-viewer .measure-length-button {\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    font-size: 16px;\n    float: right;\n\n    color: #FFFFFF;\n    opacity: 0.7;\n}\n\n.adsk-viewing-viewer .measure-length-button:hover {\n    background-color: rgba(166,194,255, 0.7);\n    -webkit-transition: all 0.2s ease;\n    -moz-transition: all 0.2s ease;\n    -ms-transition: all 0.2s ease;\n    -o-transition: all 0.2s ease;\n    transition: all 0.2s ease;\n}\n\n/* hover shouldn't work on mobile devices */\n.adsk-viewing-viewer .measure-label:hover.measure-label.enable-hover,\n.adsk-viewing-viewer .measure-label.on-edit {\n\tbox-shadow: 0 0 4px 4px #0d69ca;\n\t-webkit-box-shadow: 0 0 4px 4px #0d69ca;\n    -moz-box-shadow: 0 0 4px 4px #0d69ca;\n}\n\n.adsk-viewing-viewer .measure-label.editable {\n\tpointer-events: all;\n}\n\n.adsk-viewing-viewer .measure-label {\n    display: none;\n    position: absolute;\n    width: 7px;\n    height: 7px;\n    cursor: move;\n    pointer-events: none; \n    border-radius:100px;\n}\n\n.adsk-viewing-viewer .measure-label-hit-area {\n\tdisplay: inline-block;\n    position: absolute;\n    width: 44px;\n    height: 44px;\n    left: -22px;\n    top: -22px;\n    border-radius:100px;\n    z-index: 2;\n}\n\n.adsk-viewing-viewer .measure-label-icon {\n    display: inline-block;\n    position: absolute;\n    width: 7px;\n    height: 7px;\n    left: -2px;\n    top: -2px;\n    background-color: #009bff;\n    border-style: solid;\n    border-width: 2px;\n    border-color: #FFFFFF;\n    border-radius:100px;\n\tbox-shadow: 0 2px 5px 0 #182A3D;\n\tz-index: 2;\n}\n\n.adsk-viewing-viewer .measure-label.visible {\n    display: block;\n}\n\n\n.adsk-viewing-viewer .measure-label-text {\n    display: inline-block;\n    margin: 0px 5px 0px 5px;\n    vertical-align: middle;\n}\n\n.adsk-viewing-viewer .measure-horizontal-divider\n{\n    height: 1px;\n    border-top: 1px solid rgba(200,200,200,0.8);\n}\n\n.adsk-viewing-viewer .measure-submenu-select\n{\n    display: block;\n    position: relative;\n    width: calc(100% - 40px);\n    padding: 10px 20px 0px 20px;\n    opacity: 0.3;\n}\n\n.adsk-viewing-viewer .option-drop-down:disabled {\n    opacity: 0.3;\n}\n\n.adsk-viewing-viewer .measure-submenu-selectlabel\n{\n    position: relative;\n    display:  inline-block;\n    padding-right:  20px;\n    padding-bottom:  4px;\n}\n\n/*.measure-result {*/\n    /*display: inline-block;*/\n    /*padding: 10px 0px  10px 20px;*/\n/*}*/\n\n.adsk-viewing-viewer .measure-results {\n    position: relative;\n    display: block;\n    padding: 5px 0px  10px 30px;\n}\n\n.adsk-viewing-viewer .measure-result-label {\n    display: inline-block;\n    padding-right: 10px;\n}\n\n.adsk-viewing-viewer .measure-result-number {\n    display: inline-block;\n}\n\n.adsk-viewing-viewer .measure-delta-collapse {\n    position: absolute;\n    right: 20px;\n    display: inline-block;\n    background-color: rgba(255,255,255, .12);\n    margin: 0px 4px 0px 4px;\n    padding: 0px 4px 0px 4px;\n    cursor: pointer;\n    text-align: center;\n}\n\n.adsk-viewing-viewer .measure-delta-collapse:hover {\n    background-color: rgba(166,194,255, 0.7);\n    -webkit-transition: all 0.2s ease;\n    -moz-transition: all 0.2s ease;\n    -ms-transition: all 0.2s ease;\n    -o-transition: all 0.2s ease;\n    transition: all 0.2s ease;\n}\n\n.adsk-viewing-viewer .measure-selection-repick {\n    position: absolute;\n    right: 20px;\n    display: inline-block;\n    background-color: rgba(255,255,255, .12);\n    margin: 4px 4px 4px 4px;\n    padding: 4px 4px 4px 4px;\n    cursor: pointer;\n    text-align: center;\n}\n\n.adsk-viewing-viewer .measure-selection-repick:hover {\n    background-color: rgba(166,194,255, 0.7);\n    -webkit-transition: all 0.2s ease;\n    -moz-transition: all 0.2s ease;\n    -ms-transition: all 0.2s ease;\n    -o-transition: all 0.2s ease;\n    transition: all 0.2s ease;\n}\n\n.adsk-viewing-viewer .measure-restart {\n    margin: 10px 20px 15px 20px;\n    padding: 6px 10px 6px 10px;\n    width: calc(100% - 55px);\n    cursor: pointer;\n    text-align: center;\n    border-style: solid;\n    border-width: 1px;\n    border-color: rgba(255, 255, 255, 0.2);\n    border-radius: 3px;\n}\n\n.adsk-viewing-viewer .docking-panel:hover .measure-restart {\n    background-color: rgba(255,255,255, .12);\n}\n\n.adsk-viewing-viewer .docking-panel .measure-restart:hover {\n    background-color: rgba(166,194,255, 0.7);\n    -webkit-transition: all 0.2s ease;\n    -moz-transition: all 0.2s ease;\n    -ms-transition: all 0.2s ease;\n    -o-transition: all 0.2s ease;\n    transition: all 0.2s ease;\n}\n\n.adsk-viewing-viewer .measure-panel-title {\n    padding-top:   0px;\n    padding-left: 20px;\n    margin-top: 10px;\n}\n\n.adsk-viewing-viewer .measure-panel-title:hover {\n    cursor: pointer;\n}\n\n.adsk-viewing-viewer .measure-panel-title.collapsed  {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEwMDhBMzY4QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEwMDhBMzY5QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTAwOEEzNjZBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTAwOEEzNjdBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6WHWu4AAAAcElEQVR42mL8//8/AzmAiYFMgEtjGSFDcUmGAfEEIOYix6lWQLwUiGXJ8SNI00IgNiIncPiAeCoQ+5ITqsxQA+CAhQhN34C4AoiPkaLxGRAXAfEdUvx4DohjsGkCA1CSw4LrgZgVhxwYM9I9rQIEGACZNDs01yUXlAAAAABJRU5ErkJggg==);\n    background-repeat:no-repeat;\n}\n\n.adsk-viewing-viewer .measure-panel-title.expanded  {\n    background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE3QzFFQUQ1QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE3QzFFQUQ2QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTdDMUVBRDNBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTdDMUVBRDRBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6XuY60AAAARklEQVR42mL8//8/AzmAiYFMQBeNqSg8kB+JwKlAfAZZjIlIm9JJdSpWTYQ04tSETyNeTbg0EtSETSNRmkCAcegkOYAAAwDGjDZHvY373AAAAABJRU5ErkJggg==);\n    background-repeat:no-repeat;\n}\n\n.adsk-viewing-viewer .adsk-viewing-viewer .measure-table td {\n    padding: 10px 0px  10px 20px;\n}\n\n.adsk-viewing-viewer .measure-result-container {\n\n}\n\n.adsk-viewing-viewer .measure-selection-one-label {\n    display: inline-block;\n    margin: 18px 18px 18px 18px;\n    width: 16px;\n    height: 16px;\n    font-size: 16px;\n    float: left;\n\n    padding: 2px;\n    background-color: #0033FF;\n    border-radius:         10px;\n    opacity: 0.6;\n}\n\n.adsk-viewing-viewer .measure-selection-two-label {\n    display: inline-block;\n    margin: 18px 18px 18px 18px;\n    width: 16px;\n    height: 16px;\n    font-size: 16px;\n    float: left;\n\n    padding: 2px;\n    background-color: #0033FF;\n    border-radius:         10px;\n    opacity: 0.6;\n}\n\n.adsk-viewing-viewer .measure-repick {\n    display: inline-block;\n    cursor: default;\n    margin: 20px 20px 20px 20px;\n    width: 16px;\n    height: 16px;\n    font-size: 16px;\n    float: right;\n    opacity: 0.5;\n}\n\n.adsk-viewing-viewer .measure-repick:hover {\n    opacity: 1;\n}\n\n.adsk-viewing-viewer .measure-selection-result {\n    display: inline-block;\n    margin: 21px 0px 21px 0px;\n}\n\n.adsk-viewing-viewer .measure-distance-icon {\n    display: inline-block;\n    margin: 20px 2px 20px 2px;\n    font-size: 52px;\n    color: #FF9900;\n    float: left;\n}\n\n.adsk-viewing-viewer .measure-angle-icon {\n    display: inline-block;\n    margin: 20px 2px 20px 2px;\n    font-size: 52px;\n    color: #FF9900;\n    float: left;\n}\n\n.adsk-viewing-viewer .adsk-viewing-viewer .measure-result {\n    font-size: 20px;\n    color: #FF9900;\n    display: inline-block;\n    margin: 38px 0px 38px 0px;\n}\n\n.adsk-viewing-viewer .measure-initial {\n    font-size: 20px;\n    display: inline-block;\n    margin: 38px 0px 38px 56px;\n}\n\n.adsk-viewing-viewer .measure-settings-button {\n    cursor: default;\n    position: relative;\n    top: 20px;\n    right: 20px;\n    width: 16px;\n    height: 16px;\n    font-size: 18px;\n    float: right;\n    opacity: 0.5;\n}\n\n.adsk-viewing-viewer .measure-settings-button:hover {\n    opacity: 1;\n}\n\n.adsk-viewing-viewer .measure-delta-button {\n    position: relative;\n    top: 56px;\n    right: 4px;\n    width: 16px;\n    height: 16px;\n    font-size: 16px;\n    float: right;\n    opacity: 0.5;\n    -webkit-transform : rotate(-90deg);\n    -moz-transform : rotate(-90deg);\n    -ms-transform : rotate(-90deg);\n    -o-transform : rotate(-90deg);\n    transform : rotate(-90deg);\n}\n\n.adsk-viewing-viewer .measure-delta-button.rotated {\n    -webkit-transform : rotate(90deg);\n    -moz-transform : rotate(90deg);\n    -ms-transform : rotate(90deg);\n    -o-transform : rotate(90deg);\n    transform : rotate(90deg);\n}\n\n.adsk-viewing-viewer .measure-delta-button:hover {\n    opacity: 1;\n}\n\n.adsk-viewing-viewer .measure-delta-result {\n    display: inline-block;\n    margin: 0px 0px 20px 0px;\n    padding: 0px 0px 0px 56px;\n}\n\n.adsk-viewing-viewer .measure-label-axis {\n    display: none;\n    position: absolute;\n\n    width: 16px;\n    height: 16px;\n\n    left: 0px;\n    top:  0px;\n\n    background-color: #f4f4f4;\n    border-radius: 8px;\n    pointer-events: none;\n}\n\n.adsk-viewing-viewer .measure-label-axis-icon.X {\n    background-color: #EC4545;\n}\n\n.adsk-viewing-viewer .measure-label-axis-icon.Y {\n    background-color: #45C345;\n}\n\n.adsk-viewing-viewer .measure-label-axis-icon.Z {\n    background-color: #5757DA;\n}\n\n.adsk-viewing-viewer .measure-label-axis-icon {\n\twidth: 20px;\n    height: 18px;\n    color: #f4f4f4;\n    border-radius: 8px 0 0 8px;\n    font-size: 12px;\n    padding-top: 4px;\n    line-height: 15px;\n    text-align: center;\n}\n\n/* hover shouldn't work on mobile devices */\n.adsk-viewing-viewer .measure-label-axis-delta.enableTransition{\n\ttransition: opacity 0.1s linear;\n}\n\n.adsk-viewing-viewer .measure-label-axis-delta {\n    display: none;\n    position: absolute;\n    font-size: 18px;\n\n    left: 0px;\n    top:  0px;\n\n    background-color: #ffffff;\n    pointer-events: none;\n    \n    opacity: 0;\n\n    border-radius: 8px;\n    box-shadow: 0px 1px 3px 1px rgba(0,0,0,0.25);\n}\n\n.adsk-viewing-viewer .measure-label-axis.visible {\n    display: block;\n}\n\n.adsk-viewing-viewer .measure-label-axis-delta.visible {\n    display: flex;\n}\n\n.adsk-viewing-viewer .measure-label-axis-x {\n    color: #EC4545;\n}\n\n.adsk-viewing-viewer .measure-label-axis-y {\n    color: #45C345;\n}\n\n.adsk-viewing-viewer .measure-label-axis-z {\n    color: #5757DA;\n}\n\n\n.adsk-viewing-viewer .magnifying-glass.visible {\n    display: block;\n}\n\n.adsk-viewing-viewer .magnifying-glass {\n    position: absolute;\n    display: none;\n    -moz-border-radius: 100%;\n    -webkit-border-radius: 100%;\n    border-radius: 100%;\n    background: transparent;\n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5), inset 2px 2px 4px rgba(0,0,0,.5);\n    -webkit-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), inset 2px 2px 4px rgba(0,0,0,.5);  \n    -moz-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), inset 2px 2px 4px rgba(0,0,0,.5);\n    z-index: 4;\n}\n\n.adsk-viewing-viewer .measure-fetching-topology {\n    display: inline-block;\n    width: 10px;\n    height: 10px;\n    background: url("+n(i(285))+");\n    margin: 3px 0px -2px 3px;\n    animation: measure-topology-fetching-anim 1.4s infinite linear;\n    -webkit-animation: measure-topology-fetching-anim 1.4s infinite linear;\n}\n\n@keyframes measure-topology-fetching-anim {\n    0% {\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n    }\n    100% {\n        -webkit-transform: rotate(360deg);\n        transform: rotate(360deg);\n    }\n}\n\n@-webkit-keyframes measure-topology-fetching-anim {\n    0% {\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n    }\n    100% {\n        -webkit-transform: rotate(360deg);\n        transform: rotate(360deg);\n    }\n}\n\n.adsk-viewing-viewer .docking-panel.measure-settings-popup {\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    bottom: 120%;\n    box-sizing: border-box;\n    text-align: left;\n    position: absolute;\n    padding-top: 15px;\n    padding-bottom: 15px;\n}\n\n.adsk-viewing-viewer .adsk-toolbar-vertical .docking-panel.measure-settings-popup {\n    right: 120%;\n    bottom: unset;\n    height: max-content;\n    width: max-content;\n}\n\n.adsk-viewing-viewer .docking-panel.measure-settings-popup .adsk-lmv-tftable tr.switch-slider-row td {\n    width: auto;\n    padding-bottom: 0px;\n    padding-top: 0px;\n    vertical-align: inherit;\n}\n\n.adsk-viewing-viewer .docking-panel.measure-settings-popup.hide {\n    display: none;\n}\n\n.adsk-viewing-viewer .measure-settings-popup tbody {\n    top: 15px;\n}\n\n.adsk-toolbar .measure-toolbar-seperator {\n    height: 18px;\n    width: 1px;\n    background-color: #999;\n    float: left;\n    margin: 16px 5px;\n}\n\n.adsk-toolbar.adsk-toolbar-vertical .measure-toolbar-seperator {\n    height: 1px;\n    width: 18px;\n    margin: 5px 16px;\n}\n\n.adsk-viewing-viewer .measure-selection-area {\n\tdisplay: block;\n\tposition: absolute;\n\tcursor: pointer;\n\tz-index: 1;\n\t-webkit-tap-highlight-color: rgba(0,0,0,0);\n}\n",""])},285:function(e,t){e.exports="\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='10' height='10' viewBox='0 0 10 10'%3E %3Cdefs%3E %3ClinearGradient id='linear-gradient' y1='5' x2='10' y2='5' gradientUnits='userSpaceOnUse'%3E %3Cstop offset='0' stop-color='%23fff' stop-opacity='0'/%3E %3Cstop offset='1' stop-color='%23fff'/%3E %3C/linearGradient%3E %3C/defs%3E %3Ctitle%3EAsset 6%3C/title%3E %3Cg id='Layer_2' data-name='Layer 2'%3E %3Cg id='finals_24px'%3E %3Cpath d='M5,10A5,5,0,0,1,0,5,1.2,1.2,0,0,1,2.3,5,2.7,2.7,0,1,0,5,2.3,1.2,1.2,0,0,1,5,0,5,5,0,0,1,5,10Z' fill='url(%23linear-gradient)'/%3E %3C/g%3E %3C/g%3E %3C/svg%3E\""},286:function(e,t,i){var n=i(287);"string"==typeof n&&(n=[[e.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i(2)(n,s);n.locals&&(e.exports=n.locals)},287:function(e,t,i){(e.exports=i(1)(!1)).push([e.i,"@font-face {\n    font-family: 'calibration-icon';\n    src: url('data:application/octet-stream;base64,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') format('woff');\n    font-weight: normal;\n    font-style: normal;\n}\n\n[class^=\"calibration-icon\"], [class*=\" calibration-icon\"] {\n    font-family: 'calibration-icon';\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    line-height: 1;\n    padding-top: 2px;\n    speak: none;\n    text-transform: none;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n}\n\n.adsk-viewing-viewer .calibration-icon:before {\n    content: 'a';\n}\n\n.adsk-viewing-viewer .calibration-panel {\n    left:calc(50% - 190px);\n    top: calc(50% - 145px);\n    width: 300px;\n    height: auto;\n    z-index: 4;\n}\n\n.adsk-viewing-viewer .measure-settings-popup .option-drop-down,\n.adsk-viewing-viewer .calibration-panel .option-drop-down {\n    width: 100%;\n    padding-right: 0px;\n    box-sizing: border-box;\n}\n\n.adsk-viewing-viewer .measure-settings-popup .adsk-lmv-tftable tr td,\n.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td {\n    width: auto;\n    padding: 2px 15px 2px 0px;\n}\n\n.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td input {\n    margin: 0px;\n    box-sizing: border-box;\n    width: 100%;\n}\n\n.adsk-viewing-viewer .measure-settings-popup .switch {\n    margin-left: 25px;\n}\n.adsk-viewing-viewer .measure-settings-popup .switch .slider {\n    width: 26px;\n}\n\n.adsk-viewing-viewer .calibration-textbox::-webkit-inner-spin-button, \n.adsk-viewing-viewer .calibration-textbox::-webkit-outer-spin-button { \n    -webkit-appearance: none; \n    margin: 0; \n}\n\n.adsk-viewing-viewer .calibration-text {\n    text-align: left;\n    padding: 6px 10px 6px 10px;\n    margin: 20px 20px 14px 20px;\n    font-size: 14px;\n    -webkit-font-smoothing: antialiased;\n}\n\n.adsk-viewing-viewer .calibration-button {\n    margin-top: 15px;\n}\n\n.adsk-viewing-viewer .calibration-button-left {\n    width: calc(50% - 15px);\n    margin-right: 5px !important;\n    display: inline-block;\n}\n\n.adsk-viewing-viewer .calibration-button-right {\n    width: calc(50% - 15px);\n    margin-left: 5px !important;\n    display: inline-block;\n}\n\n.adsk-viewing-viewer .calibration-line {\n    position: absolute;\n    display: block;    \n    top:0;\n    left:0;\n    pointer-events: none;\n    z-index: 0;\n}\n\n.adsk-viewing-viewer .calibration-label {\n    display: none;\n    position: absolute;\n    pointer-events: none;\n    text-align: 'center';\n    vertical-align: middle;\n    cursor: default;\n    padding: 2px;\n    color: #000000;\n    background: #FFFFFF;\n    border-radius: 10px;\n    -webkit-transform-origin: 50%  53%;\n}\n\n.adsk-viewing-viewer .calibration-label-text {\n    display: inline-block;\n    pointer-events: none;\n    text-align: 'center';\n    vertical-align: middle;\n    font-size: 12px;\n    cursor: default;\n    padding: 2px;\n    color: #000000;\n    background: #FFFFFF;\n    border-bottom: 1px dashed #000000;\n    text-decoration: none;\n    text-transform: uppercase;\n    -webkit-font-smoothing: antialiased;\n}\n\n.adsk-viewing-viewer .calibration-label-text:hover {\n    color: #039be5;\n    border-bottom: 1px dashed #039be5;\n}\n\n.adsk-viewing-viewer .calibration-label.visible {\n    display: block;\n}\n\n.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover,\n.adsk-viewing-viewer .calibration-endpoint.edit {\n    background-color: #039be5;\n}\n\n.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover > * ,\n.adsk-viewing-viewer .calibration-endpoint.edit > * {\n    color: #ffffff;\n}\n\n.adsk-viewing-viewer .calibration-endpoint.editable {\n    pointer-events: all;\n}\n\n.adsk-viewing-viewer .calibration-endpoint {\n    display: none;\n    position: absolute;\n    cursor: move;\n    pointer-events: none;\n    width: 30px;\n    height: 30px;\n    background-color: #ffffff;\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.24), 0 0 8px 0 rgba(0, 0, 0, 0.12);\n    -moz-border-radius: 50px;\n    -webkit-border-radius: 50px;\n    border-radius: 50px;\n    justify-content:center;\n    align-items:center;\n    text-align: center;\n}\n\n.adsk-viewing-viewer .calibration-endpoint.visible {\n    display: block;\n}\n\n.adsk-viewing-viewer .calibration-endpoint-text {\n    display: inline-block;\n    font-size: 14px;\n    vertical-align: middle;\n    cursor: default;\n    margin: 5px 5px 5px 5px;\n    vertical-align: middle;\n    text-align: center;\n    color: #039be5;\n    text-decoration: none;\n    text-transform: uppercase;\n    pointer-events: none;\n}\n\n.adsk-viewing-viewer .calibration-buttons-wrapper {\n    text-align: center;\n}\n",""])},3:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var i=t.protocol+"//"+t.host,n=i+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var s,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(s=0===a.indexOf("//")?a:0===a.indexOf("/")?i+a:n+a.replace(/^\.\//,""),"url("+JSON.stringify(s)+")")})}},359:function(e,t,i){"use strict";i.r(t);var n=Autodesk.Viewing.MeasureCommon;function s(e){this.viewer=e,this.init()}var a=s.prototype;a.getCurrentMeasurement=function(){return this.currentMeasurement},a.selectMeasurementById=function(e){var t=this.measurementsList[e];return!!t&&(this.changeCurrentMeasurement(t),this.currentMeasurement)},a.createMeasurement=function(e){var t=this.measurementsCounter,i=new n.Measurement(e,t);return this.measurementsList[t]=i,this.measurementsCounter++,this.changeCurrentMeasurement(i),this.currentMeasurement},a.changeCurrentMeasurement=function(e){this.currentMeasurement=e,this.viewer.dispatchEvent({type:n.Events.MEASUREMENT_CHANGED_EVENT,data:{type:e.measurementType,id:e.id}})},a.removeCurrentMeasurement=function(){Object.keys(this.measurementsList).length>0&&delete this.measurementsList[this.currentMeasurement.id]},a.init=function(){this.reset()},a.destroy=function(){this.reset()},a.reset=function(){this.currentMeasurement=null,this.measurementsList={},this.measurementsCounter=0};var o=Autodesk.Viewing,r=o.MeasureCommon,l=function(e,t,i){this.viewer=e,this.measurement=t,this.tool=i,this.snapper=i.getSnapper(),this.materialExtensionLine=null,this.materialExtensionFace=null,this.extensionLines=[],this.extensionFaces=[],this.grayOutPlane=[],this.materialPoint=null,this.materialLine=null,this.materialAngle=null,this.materialAngleOutline=null,this.materialGreyOutPlane=null,this.materialFace=null,this.angleArc=null,this.angleOutline=[],this.showMeasureResult=!1,this.visibleLabels=[],this.overlayName="measure-indicator-overlay-"+(t.id||""),this.xAxis=this.viewer.autocam.getWorldRightVector(),this.yAxis=this.viewer.autocam.getWorldUpVector(),this.zAxis=this.viewer.autocam.getWorldFrontVector()},c=l.prototype;function h(e){function t(e,t,n,s){this.x=e,this.y=t,this.h=n,this.d=function(e,t,n){for(var s=!1,a=1/0,o=0;o<n.length;o++)for(var r=n[o],l=0,c=r.length,h=c-1;l<c;h=l++){var d=r[l],u=r[h];d.y>t!=u.y>t&&e<(u.x-d.x)*(t-d.y)/(u.y-d.y)+d.x&&(s=!s),a=Math.min(a,i(e,t,d,u))}return(s?1:-1)*Math.sqrt(a)}(e,t,s),this.max=this.d+this.h*Math.SQRT2}function i(e,t,i,n){var s=i.x,a=i.y,o=n.x-s,r=n.y-a;if(0!==o||0!==r){var l=((e-s)*o+(t-a)*r)/(o*o+r*r);l>1?(s=n.x,a=n.y):l>0&&(s+=o*l,a+=r*l)}return(o=e-s)*o+(r=t-a)*r}function n(e,t){if(!(this instanceof n))return new n(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||function(e,t){return e<t?-1:e>t?1:0},this.length>0)for(var i=this.length>>1;i>=0;i--)this._down(i)}if(n.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,i=this.compare,n=t[e];e>0;){var s=e-1>>1,a=t[s];if(i(n,a)>=0)break;t[e]=a,e=s}t[e]=n},_down:function(e){for(var t=this.data,i=this.compare,n=this.length>>1,s=t[e];e<n;){var a=1+(e<<1),o=a+1,r=t[a];if(o<this.length&&i(t[o],r)<0&&(a=o,r=t[o]),i(r,s)>=0)break;t[e]=r,e=a}t[e]=s}},3===e.length)return function(e){for(var t=new THREE.Vector3,i=e.length,n=0;n<i;n++)t.add(e[n]);return t.multiplyScalar(1/i),t}(e);var s,a,o,r;e=[e];for(var l=0;l<e[0].length;l++){var c=e[0][l];(!l||c.x<s)&&(s=c.x),(!l||c.y<a)&&(a=c.y),(!l||c.x>o)&&(o=c.x),(!l||c.y>r)&&(r=c.y)}var h=o-s,d=r-a,u=Math.min(h,d),p=u/2,m=new n(null,function(e,t){return t.max-e.max});if(0===u)return[s,a];for(var g=s;g<o;g+=u)for(var b=a;b<r;b+=u)m.push(new t(g+p,b+p,p,e));var v=function(e){for(var i=0,n=0,s=0,a=e[0],o=0,r=a.length,l=r-1;o<r;l=o++){var c=a[o],h=a[l],d=c.x*h.y-h.x*c.y;n+=(c.x+h.x)*d,s+=(c.y+h.y)*d,i+=3*d}return 0===i?new t(a[0].x,a[0].y,0,e):new t(n/i,s/i,0,e)}(e),f=new t(s+h/2,a+d/2,0,e);for(f.d>v.d&&(v=f);m.length;){var A=m.pop();A.d>v.d&&(v=A),A.max-v.d<=.01||(p=A.h/2,m.push(new t(A.x-p,A.y-p,p,e)),m.push(new t(A.x+p,A.y-p,p,e)),m.push(new t(A.x-p,A.y+p,p,e)),m.push(new t(A.x+p,A.y+p,p,e)))}return{x:v.x,y:v.y}}c.init=function(){return!1},c.updateDistance=function(){return!1},c.updateAngle=function(){return!1},c.clear=function(){return!1},c.updateLabelsPosition=function(){return!1},c.render=function(e,t){this.showMeasureResult=t,this.clear();for(var i=1;i<=Object.keys(e).length;i++)this.measurement.hasPick(i)&&this.renderPick(i);this.renderRubberband(e),this.updateLabelsPosition()},c.changeEndpointOnEditStyle=function(e,t){return!1},c.handleResize=function(){return!1},c.setNoTopology=function(){return!1},c.setFetchingTopology=function(){return!1},c.setTopologyAvailable=function(){return!1},c.clientToCanvasCoords=function(e){var t=this.viewer.impl.getCanvasBoundingClientRect(),i={};return e.hasOwnProperty("center")?(e.canvasX=i.x=e.center.x-t.left,e.canvasY=i.y=e.center.y-t.top):(e.canvasX=i.x=e.pointers[0].clientX-t.left,e.canvasY=i.y=e.pointers[0].clientY-t.top),i},c.initLabelMobileGestures=function(e,t){var i=this.viewer.toolController.getTool("magnifyingGlass");this.hammer=new o.Hammer.Manager(e,{recognizers:[o.GestureRecognizers.drag,o.GestureRecognizers.singletap],handlePointerEventMouse:!1,inputClass:o.isIE11?o.Hammer.PointerEventInput:o.Hammer.TouchInput}),this.onSingleTapBinded=function(e){var i=this.clientToCanvasCoords(e);this.snapper.onMouseDown(i),this.tool.editEndpoint(e,t,this.measurement.id)}.bind(this),this.onDragStartBinded=function(e){var n=this.clientToCanvasCoords(e);this.snapper.onMouseDown(n),this.tool.editEndpoint(e,t,this.measurement.id),this.tool.editByDrag=!0,e.type="press",i.handlePressHold(e),this.tool.handlePressHold(e),e.type="dragstart",i.handleGesture(e),this.tool.handleGesture(e)}.bind(this),this.onDragMoveBinded=function(e){var t=this.clientToCanvasCoords(e);this.snapper.onMouseDown(t),i.handleGesture(e),this.tool.handleGesture(e)}.bind(this),this.onDragEndBinded=function(e){var t=this.clientToCanvasCoords(e);this.snapper.onMouseDown(t),i.handleGesture(e),this.tool.handleGesture(e),e.type="pressup",i.handlePressHold(e),this.tool.handlePressHold(e),this.tool.handleButtonUp(e)}.bind(this),this.hammer.on("singletap",this.onSingleTapBinded),this.hammer.on("dragstart",this.onDragStartBinded),this.hammer.on("dragmove",this.onDragMoveBinded),this.hammer.on("dragend",this.onDragEndBinded)},c.clearLabelMobileGestures=function(){this.hammer&&(this.hammer.off("singletap",this.onSingleTapBinded),this.hammer.off("dragstart",this.onDragStartBinded),this.hammer.off("dragmove",this.onDragMoveBinded),this.hammer.off("dragend",this.onDragEndBinded),this.hammer=null)},c.updateVisibleLabelsArray=function(e,t){if(t)this.visibleLabels.indexOf(e)>-1||this.visibleLabels.push(e);else{var i=this.visibleLabels.indexOf(e);i>-1&&this.visibleLabels.splice(i,1)}},c.hideEndpoints=function(){for(var e in this.endpoints)if(this.endpoints.hasOwnProperty(e)){var t=this.endpoints[e];t.label&&this.hideLabel(t.label)}},c.showEndpoints=function(){for(var e in this.endpoints)if(this.endpoints.hasOwnProperty(e)){var t=this.endpoints[e];this.measurement.hasPick(e)&&t.label&&this.showLabel(t.label)}},c.hideLabel=function(e){e&&(r.safeToggle(e,"visible",!1),this.updateVisibleLabelsArray(e,!1))},c.showLabel=function(e){e&&(r.safeToggle(e,"visible",!0),this.updateVisibleLabelsArray(e,!0))},c.changeEndpointOnEditStyle=function(e,t){this.endpoints[e]&&this.endpoints[e].label&&r.safeToggle(this.endpoints[e].label,"on-edit",t)},c.changeEndpointEditableStyle=function(e,t){this.endpoints[e]&&this.endpoints[e].label&&r.safeToggle(this.endpoints[e].label,"editable",t)},c.changeAllEndpointsEditableStyle=function(e){for(var t in this.endpoints)this.endpoints.hasOwnProperty(t)&&this.changeEndpointEditableStyle(t,e)},c.changeAllEndpointsOnEditStyle=function(e){for(var t in this.endpoints)this.endpoints.hasOwnProperty(t)&&this.changeEndpointOnEditStyle(t,e)},c.hideLabelsOutsideOfView=function(){this.viewer.model&&!this.viewer.model.is2d()&&this.visibleLabels.forEach(function(e){if(e.point){var t=this.viewer.navigation.isPointVisible(e.point);(e.classList.contains("visible")&&!t||!e.classList.contains("visible")&&t)&&e.classList.toggle("visible",t)}}.bind(this))},c.showClick=function(e){this.tool.getActivePointIndex()!==e&&this.showLabel(this.endpoints[e].label)},c.hideClick=function(e){this.endpoints[e]&&this.hideLabel(this.endpoints[e].label)},c.renderPick=function(e){this.endpoints[e]||this.createEndpoint(e),this.renderEndpointGeometry(e),this.showClick(e)},c.renderEndpointGeometry=function(e){var t=r.getSnapResultPosition(this.measurement.getPick(e),this.viewer);this.endpoints[e].position=t.clone()},c.drawEdgeAsCylinder=function(e,t,i,n,s){var a,o=[];if(1==n)for(var r=0;r<e.vertices.length;r+=2)a=this.cylinderMesh(e.vertices[r],e.vertices[r+1],t,i,s),this.setCylinderScale(a,e.vertices[r],e.vertices[r+1]),o.push(a);else for(r=0;r<e.vertices.length-1;r++)a=this.cylinderMesh(e.vertices[r],e.vertices[r+1],t,i,s),this.setCylinderScale(a,e.vertices[r],e.vertices[r+1]),o.push(a);return o},c.drawDashedLine=function(e,t,i,n,s,a,o){for(var r=new THREE.Geometry,l=(new THREE.Vector3).subVectors(t,e),c=l.length()-n,h=l.normalize(),d=0,u=e.clone(),p=0;p<c;){var m=this.viewer.navigation.isPointVisible(u);m&&(r.vertices[d]=u.clone(),d++),u.addVectors(u,h.clone().multiplyScalar(i)),m&&(r.vertices[d]=u.clone(),d++),u.addVectors(u,h.clone().multiplyScalar(n)),p+=i+n}return l=this.drawEdgeAsCylinder(r,s,a,1,this.getNewCylinderGeometry()),this.viewer.impl.addMultipleOverlays(o,l),l},c.drawLineAsCylinder=function(e,t,i,n){var s;return 2==e.vertices.length&&(s=this.cylinderMesh(e.vertices[0],e.vertices[1],t,i,this.getNewCylinderGeometry()),this.setCylinderScale(s,e.vertices[0],e.vertices[1]),this.viewer.impl.addOverlay(n,s)),s},c.getNewCylinderGeometry=function(){return new THREE.CylinderGeometry(.1,.1,1,8,1,!0)},c.cylinderMesh=function(e,t,i,n,s){var a=(new THREE.Vector3).subVectors(t,e),o=new THREE.Matrix4;o.lookAt(e,t,(new THREE.Object3D).up),o.multiply((new THREE.Matrix4).set(n,0,0,0,0,0,n,0,0,-a.length(),0,0,0,0,0,1));var r=new THREE.Mesh(s,i);return r.applyMatrix(o),r.lmv_line_width=n,r.position.x=(t.x+e.x)/2,r.position.y=(t.y+e.y)/2,r.position.z=(t.z+e.z)/2,r},c.setCylinderScale=function(e,t,i){var n;if(t&&i){var s=r.nearestPointInPointToSegment(this.viewer.navigation.getPosition(),t,i);n=this.setScale(s)}else n=this.setScale(e.position);e.hasOwnProperty("lmv_line_width")&&(n*=e.lmv_line_width),e.scale.x=n,e.scale.z=n},c.setScale=function(e){var t=this.viewer.navigation,i=t.getCamera(),n=t.getPosition(),s=e.clone(),a=i.isPerspective?s.sub(n).length():t.getEyeVector().length(),o=t.getVerticalFov();return 5*(2*a*Math.tan(THREE.Math.degToRad(.5*o)))/t.getScreenViewport().height},c.alignLabelWithLine=function(e,t,i,n,s){var a=s.navigation.getCameraUpVector(),o=180*new THREE.Vector3(0,1,0).angleTo(a)/Math.PI;o=a.x>=0?o:-o;var r=null,l=t.x-i.x,c=t.y-i.y;r=-((r=t.x<i.x?180*Math.atan2(-c,-l)/Math.PI:180*Math.atan2(c,l)/Math.PI)+o),Math.abs(r)>90&&(r+=180),e.style.transform="rotate("+r+"deg) translate(0px, "+n+"px)"},c.destroy=function(){for(var e in this.materialPoint=null,this.materialFace=null,this.materialLine=null,this.materialAngle=null,o.isTouchDevice()&&this.clearLabelMobileGestures(),this.endpoints)if(this.endpoints.hasOwnProperty(e)){var t=this.endpoints[e];t.label&&(t.label.removeEventListener(o.isSafari()?"mousedown":"pointerdown",this.onMouseClickBinded),t.label.removeEventListener("mousewheel",this.viewer.toolController.mousewheel),t.label.parentNode.removeChild(t.label),t.label=null)}this.visibleLabels=[]},c.renderRubberband=function(e){switch(this.measurement.measurementType){case r.MeasurementTypes.MEASUREMENT_DISTANCE:var t=e[1],i=e[2],n=r.getSnapResultPosition(t,this.viewer),s=r.getSnapResultPosition(i,this.viewer);n&&s&&this.renderDistanceMeasurement(n,s);break;case r.MeasurementTypes.MEASUREMENT_ANGLE:this.renderAngleMeasurement(e);break;case r.MeasurementTypes.MEASUREMENT_AREA:this.renderAreaMeasurement(e)}},c.initMouseEvent=function(e,t){var i=o.isSafari();this.onMouseClickBinded=function(e){(i||"mouse"===e.pointerType)&&(e.canvasX=e.clientX,e.canvasY=e.clientY,this.tool.editEndpoint(e,t,this.measurement.id))}.bind(this),e.addEventListener(i?"mousedown":"pointerdown",this.onMouseClickBinded)};var d=Autodesk.Viewing,u=Autodesk.Viewing.MeasureCommon;function p(e,t,i){l.call(this,e,t,i),this.measureTool=i,this.endpoints=[],this.lines={xyz:{axis:!1,material:g("005BCE"),className:"adsk-icon-axis-delta-xyz measure-label-axis-delta measure-label-axis-xyz"},x:{axis:!0,material:g("F12C2C"),className:"adsk-icon-axis-delta-x measure-label-axis-delta measure-label-axis-x",iconText:"X"},y:{axis:!0,material:g("0BB80B"),className:"adsk-icon-axis-delta-y measure-label-axis-delta measure-label-axis-y",iconText:"Y"},z:{axis:!0,material:g("2C2CF1"),className:"adsk-icon-axis-delta-z measure-label-axis-delta measure-label-axis-z",iconText:"Z"}},this.segments=[],this.dashedLine={},this.simple=!1,this.angleLabel={},this.areaLabel={},this.labels=[],this.isLeaflet=!1,this.topologyStatus=b,this.tmpVector=new THREE.Vector3,this.surfaceColor=new THREE.MeshBasicMaterial({color:parseInt("005BCE",16),opacity:.15,transparent:!0,depthTest:!1,depthWrite:!1,side:THREE.DoubleSide})}p.prototype=Object.create(l.prototype),p.prototype.constructor=p;var m=p.prototype;function g(e){return new THREE.MeshBasicMaterial({color:parseInt(e,16),depthTest:!1,depthWrite:!1,side:THREE.DoubleSide})}var b=0,v=1,f=2,A=3,w=2;function y(e){return e.classList.contains("visible")}function E(e,t){return e.right>=t.left&&e.right<=t.right}function x(e,t){return e.left>=t.left&&e.left<=t.right}function T(e,t){return e.left<=t.left&&e.right>=t.right}function C(e,t){return e.top<t.bottom&&e.bottom>t.top}function k(e,t,i){e.style.left=parseInt(e.style.left,10)-(t.right-i.left)+"px"}function M(e,t,i){e.style.left=parseInt(e.style.left,10)+(i.right-t.left)+"px"}function L(e,t,i){e.style.top=parseInt(e.style.top,10)+(i.bottom-t.top)+"px"}function S(e,t){if(e){var i=e.querySelector(".measure-length-text");i&&(i.textContent=t)}}function B(e,t){if(e){var i=e.querySelector(".measure-delta-text");i&&(i.textContent=t)}}function P(e,t,i){if(e){var n=e.querySelector(".measure-fetching-topology");n&&(n.style.display=t&&i===v?"inline-block":"none")}}function V(e,t,i,n){var a=e,o=["measure"],r=i,l=Autodesk.Viewing,c=(Autodesk.Viewing.Extensions.Measure,Autodesk.Viewing.MeasureCommon),h=!1,d=!1,u=!1,m=0,g=!1,b=!1,v=null,f=null,A=!1,w=new s(a),y=null,E=null,x=n,T=!1,C=[],k=null,M=25,L=[],S=[],B=c.MeasurementTypes.MEASUREMENT_DISTANCE;function P(){return y?0===m?null:(e=m===y.getMaxNumberOfPicks()+1?y.countPicks():m,y.getPick(e)):null;var e}function V(){return y?0===m?null:(e=1===m?y.countPicks():m===y.getMaxNumberOfPicks()+1?y.countPicks()-1:m-1,y.getPick(e)):null;var e}function R(){m=0}function N(){m=y.countPicks()+1,O(!0),y.indicator.enableSelectionAreas(!0)}function I(){return 0===m||!y}function D(t,i){if(y.hasPick(1)&&m>3&&!y.closedArea){var n=y.getPick(1),s=c.getSnapResultPosition(n,a),o=c.project(s,e),r=c.getSnapResultPosition(t,a),l=c.project(r,e);(i||l.distanceTo(o)<M)&&(x.onMouseMove(o),n.copyTo(t))}}function z(e){var t=y.computeResult(y.picks,a,x);return y.indicator.render(y.picks,g||!!e),t}function O(e){for(var t in w.measurementsList)if(w.measurementsList.hasOwnProperty(t)){var i=w.measurementsList[t];i.indicator.changeAllEndpointsEditableStyle(e),i.indicator.enableSelectionAreas(e),i.indicator.enableLabelsTouchEvents(e)}}this.areAllPicksSet=function(){return y&&m===y.getMaxNumberOfPicks()+1},this.register=function(){},this.deregister=function(){this.deactivate()},this.isActive=function(){return h},this.getNames=function(){return o},this.getName=function(){return o[0]},this.getPriority=function(){return 50},this.getCursor=function(){return d?null:"url(data:image/png;base64,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), auto"},this.getCurrentMeasurementRaw=function(){return y},this.getActivePointIndex=function(){return m},this.startNewMeasurement=function(){(y=w.createMeasurement(B)).attachIndicator(a,this,p),E instanceof Function&&(E(),E=null),O(!1)},this.changeMeasurementType=function(e){B=e},this.activate=function(){h=!0,w.init(),R(),d=!1,this.isEditingEndpoint=!1,this.editByDrag=!1,a.impl.pauseHighlight(!0),L=a.getIsolatedNodes(),S=a.getHiddenNodes(),a.clearSelection(),a.toolController.activateTool("snapper"),a.toolController.activateTool("magnifyingGlass"),this.onMeasurementChangedBinded=this.onMeasurementChanged.bind(this),a.addEventListener(c.Events.MEASUREMENT_CHANGED_EVENT,this.onMeasurementChangedBinded),a.addEventListener(l.CAMERA_CHANGE_EVENT,this.onCameraChange),a.addEventListener(l.ISOLATE_EVENT,this.onIsolate)},this.deactivate=function(){if(h){for(h=!1;Object.keys(w.measurementsList).length>0;)y=w.measurementsList[Object.keys(w.measurementsList)[0]],w.changeCurrentMeasurement(y),this.clearCurrentMeasurement(),y=null;x&&x.isActive()&&a.toolController.deactivateTool("snapper"),a.toolController.deactivateTool("magnifyingGlass"),a.impl.pauseHighlight(!1),L=[],S=[],w.destroy(),a.removeEventListener(l.CAMERA_CHANGE_EVENT,this.onCameraChange),a.removeEventListener(c.Events.MEASUREMENT_CHANGED_EVENT,this.onMeasurementChangedBinded),a.removeEventListener(l.ISOLATE_EVENT,this.onIsolate)}},this.update=function(){return!1},this.getUnits=function(){return r.units},this.setUnits=function(e){if(r.units!==e)for(var t in r.units=e,a.dispatchEvent({type:c.Events.DISPLAY_UNITS_CHANGED,units:e}),w.measurementsList)if(w.measurementsList.hasOwnProperty(t)){var i=w.measurementsList[t];i.indicator&&i.indicator.updateResults()}},this.getPrecision=function(){return r.precision},this.setPrecision=function(e){if(r.precision!==e)for(var t in r.precision=e,w.measurementsList)if(w.measurementsList.hasOwnProperty(t)){var i=w.measurementsList[t];i.indicator&&i.indicator.updateResults()}},this.getDistanceXYZ=function(e){return e||(e=y),this.getDistanceAux(e.distanceXYZ)},this.getDistanceX=function(e){return e||(e=y),this.getDistanceAux(e.distanceX)},this.getDistanceY=function(e){return e||(e=y),this.getDistanceAux(e.distanceY)},this.getDistanceZ=function(e){return e||(e=y),this.getDistanceAux(e.distanceZ)},this.getDistanceAux=function(e){if(a.model){var t=Autodesk.Viewing.Private.convertUnits(a.model.getUnitString(),r.units,r.calibrationFactor,e||0);return Autodesk.Viewing.Private.formatValueWithUnits(t,r.units,3,r.precision)}},this.getAngle=function(e){e||(e=y);var t=e.angle;return Autodesk.Viewing.Private.formatValueWithUnits(t,String.fromCharCode(176),3,r.precision)},this.getArea=function(t){if(a.model){t||(t=y);var i=Autodesk.Viewing.Private.convertUnits(e.model.getUnitString(),r.units,r.calibrationFactor,t.area,"square");return r.units?Autodesk.Viewing.Private.formatValueWithUnits(i,r.units+"^2",3,r.precision):Autodesk.Viewing.Private.formatValueWithUnits(i,null,3,r.precision)}},this.getMeasurement=function(e,t){r.units=e||r.units,r.precision=t||r.precision;var i=["Vertex","Edge","Face","Circular Arc","Curved Edge","Curved Face"];return{from:i[y.getGeometry(1).type],to:i[y.getGeometry(2).type],distance:this.getDistanceXYZ(),deltaX:this.getDistanceX(),deltaY:this.getDistanceY(),deltaZ:this.getDistanceZ(),angle:this.getAngle(),unitType:r.units,precision:r.precision}},this.clearCurrentMeasurement=function(){if(y){for(var e in R(),y.picks)y.picks.hasOwnProperty(e)&&this.clearPick(e);this.updateViewportId(!0),A&&this.clearIsolate(),y.indicator.clear(),y.indicator.destroy(),y=w.removeCurrentMeasurement(),y=null}O(!0)},this.clearPick=function(e){y&&y.hasPick(e)&&(y.clearPick(e),y.indicator.hideClick(e))},this.setIsolateMeasure=function(e){A=e},this.isolateMeasurement=function(){if(y){var e=[];for(var t in y.picks)y.picks.hasOwnProperty(t)&&e.push(y.getPick(t).snapNode);a.removeEventListener(l.ISOLATE_EVENT,this.onIsolate),a.isolate(e),a.addEventListener(l.ISOLATE_EVENT,this.onIsolate)}},this.clearIsolate=function(){a.removeEventListener(l.ISOLATE_EVENT,this.onIsolate),a.showAll(),a.isolate(L),a.hide(S),a.addEventListener(l.ISOLATE_EVENT,this.onIsolate)},this.onIsolate=function(e){e.nodeIdArray.length||(L=[],S=[])},this.deselectAllMeasurements=function(){for(var e in y&&!this.areAllPicksSet()&&(this.isEditingEndpoint?this.undoEditEndpoint():this.clearCurrentMeasurement()),w.measurementsList)if(w.measurementsList.hasOwnProperty(e)){var t=w.measurementsList[e];t.indicator&&(t.indicator.setSimple(!0),t.indicator.hideEndpoints(),t.indicator.unfocusLabels())}y=null},this.onMeasurementChanged=function(){this.deselectAllMeasurements(),(y=w.getCurrentMeasurement()).isComplete()&&(y.indicator.setSimple(!1),N(),z(!0),this.updateResults())},this.selectMeasurementById=function(e){y||(y=w.selectMeasurementById(e)),y.id!==e&&(this.areAllPicksSet()||(this.isEditingEndpoint?this.undoEditEndpoint():this.clearCurrentMeasurement()),y=w.selectMeasurementById(e))},this.editEndpoint=function(e,t,i){if(y.id===i&&m===t)return y.indicator.changeEndpointOnEditStyle(t,!1),void this.undoEditEndpoint();for(var n in this.selectMeasurementById(i),m=t,this.isEditingEndpoint=!0,y.indicator.changeEndpointOnEditStyle(t,!0),O(!1),y.picks)y.picks.hasOwnProperty(n)&&(C[n]=y.getPick(n).clone());this.updateViewportId(),A&&this.clearIsolate(),l.isMobileDevice()||this._handleMouseEvent(e)},this.undoEditEndpoint=function(){for(var e in y.indicator.clear(),y.picks)y.picks.hasOwnProperty(e)&&y.setPick(e,C[e].clone());y.indicator.changeEndpointOnEditStyle(m,!1),this.isEditingEndpoint=!1,this.updateViewportId(!0),N(),z(!0)},this.updateResults=function(){y.indicator.updateResults(),y.indicator.showEndpoints(),y.indicator.focusLabels(),A&&y.isComplete()&&this.isolateMeasurement()},this.deleteCurrentMeasurement=function(){this.clearCurrentMeasurement(),this.isEditingEndpoint=!1,this.editByDrag=!1,d=!1},this.deleteCurrentPick=function(){for(var e=P().id;y.hasPick(e+1);)y.setPick(e,y.getPick(e+1)),e++;delete y.picks[e];var t=y.countPicks();if(--m<=0&&(m=t),this.isEditingEndpoint){if(2==t)return void this.deleteCurrentMeasurement();y.indicator.changeAllEndpointsOnEditStyle(!1),this.isEditingEndpoint=!1,this.updateViewportId(!0),N(),z()}else this._handleMouseEvent()},this.updateViewportId=function(e){if(a.model&&a.model.is2d())if(e||I())a.impl.updateViewportId(0),x.setViewportId(null);else if(!T){var t=V().viewportIndex2d||P().viewportIndex2d;a.impl.updateViewportId(t),x&&x.setViewportId(t)}},this.setNoTopology=function(){y&&y.indicator?y.indicator.setNoTopology():E=function(){y.indicator.setNoTopology()}},this.setFetchingTopology=function(){y&&y.indicator?y.indicator.setFetchingTopology():E=function(){y.indicator.setFetchingTopology()}},this.setTopologyAvailable=function(){y&&y.indicator?y.indicator.setTopologyAvailable():E=function(){y.indicator.setTopologyAvailable()}},this.getSnapper=function(){return x},this.correctPickPosition=function(){var t=P();if(t&&!t.getGeometry()&&k&&(t.geomType=c.SnapType.SNAP_VERTEX,t.geomVertex=k,t.intersectPoint=k),function(){return!!y&&0!==m&&(e=1===m?y.countPicks():m===y.getMaxNumberOfPicks()+1?y.countPicks()-1:m-1,y.hasPick(e));var e}()){var i=V();if(!c.correctPerpendicularPicks(i,t,e,x)){var n=(t.id+1)%(y.countPicks()+1);if(0===n&&(n=1),n!==t.id&&y.hasPick(n)){var s=y.getPick(n);c.correctPerpendicularPicks(s,t,e,x)}}y.measurementType==c.MeasurementTypes.MEASUREMENT_AREA&&D(t)}},this._handleMouseEvent=function(e){var t=!1;if(x.isSnapped())(this.areAllPicksSet()||I())&&(this.startNewMeasurement(),A&&this.clearIsolate(),m=1),x.copyResults(P()),t=!0;else{if(e&&a.model&&a.model.is2d()){var i=a.container.getBoundingClientRect(),n=e.canvasX||e.clientX-i.left,s=e.canvasY||e.clientY-i.top;n&&s&&(k=c.inverseProject({x:n,y:s},a))}if(g&&y&&!this.isEditingEndpoint&&m===y.getMaxNumberOfPicks()+1)return!0;var o=P();o&&o.clear()}if(y&&(this.correctPickPosition(),g&&this._doConsumeSingleClick(),!I())){var r=z();y.hasPick(2)&&(t&=r)}return t},this._doConsumeSingleClick=function(){if(y.measurementType===c.MeasurementTypes.MEASUREMENT_AREA&&!y.closedArea){var e=y.countPicks(),t=y.getPick(1),i=y.getPick(e);e>=3&&y.hasEqualPicks(t,i)&&(i.clear(),delete y.picks[e],y.closedArea=!0)}this.updateResults();var n=y.isComplete();this.updateViewportId(n)},this.handleButtonDown=function(e,t){return!l.isMobileDevice()&&(d=!0,0!==t||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(g=!0,v=e.canvasX,f=e.canvasY),!1)},this.handleMouseMove=function(e){return!l.isMobileDevice()&&(e.canvasX===v&&e.canvasY===f||(g=!1),u=this.isEditingEndpoint,I()||this.areAllPicksSet()||(this.clearPick(m),this._handleMouseEvent(e)),x.indicator.render(),!1)},this.restoreMouseListeners=function(){a.toolController.getTool("gestures").controller.enableMouseButtons(!0)},this.handlePressHold=function(e){if(g=!1,l.isTouchDevice())switch(e.type){case"press":return T=!0,(this.areAllPicksSet()||I())&&(this.startNewMeasurement(),A&&this.clearIsolate(),m=1),this._handleMouseEvent(e),x.indicator.render(),!0;case"pressup":return g=!0,this.restoreMouseListeners(),b=!b,this.handleSingleClick(e),T=!1,!0}return!1},this.handleGesture=function(e){if(l.isTouchDevice()){if(g=!1,T)switch(this.clearPick(m),e.type){case"dragstart":case"dragmove":return this._handleMouseEvent(e),x.indicator.render(),!0;case"dragend":return T=!1,g=!0,this.editByDrag||(b=!b,this.handleSingleClick(e)),this.editByDrag=!1,this.restoreMouseListeners(),!0;case"pinchstart":case"pinchmove":this._handleMouseEvent(e),x.indicator.render();break;case"pinchend":return g=!0,b=!b,this.handleSingleClick(e),this.restoreMouseListeners(),!0}if(-1!==e.type.indexOf("pinch"))for(var t in w.measurementsList){if(w.measurementsList.hasOwnProperty(t))w.measurementsList[t].indicator.updateScale()}}return!1},this.handleButtonUp=function(e,t){return d=!1,v=null,f=null,u&&(g=!0,b=!b,this.handleSingleClick(e),u=!1),!1},this.handleSingleClick=function(e,t){return g&&(x.indicator.clearOverlays(),y&&y.indicator.changeEndpointOnEditStyle(m,!1),this._handleMouseEvent(e)?(this.updateResults(),m++):this.isEditingEndpoint?this.undoEditEndpoint():y&&y.measurementType===c.MeasurementTypes.MEASUREMENT_AREA&&y.countPicks()>3?(D(P(),!0),this._handleMouseEvent()):this.clearCurrentMeasurement(),y&&y.isComplete()&&N(),g=!1,b=!b,this.isEditingEndpoint=!1,x.clearSnapped()),!0},this.handleDoubleClick=function(e){return!0},this.onCameraChange=function(){for(var e in w.measurementsList){if(w.measurementsList.hasOwnProperty(e))w.measurementsList[e].indicator.updateScale()}x.indicator.onCameraChange()},this.handleSingleTap=function(e){return b||(g=!0,x.onMouseDown({x:e.canvasX,y:e.canvasY}),this.handleSingleClick(e)),b=!b,!0},this.handleDoubleTap=function(t){if(y&&y.measurementType===c.MeasurementTypes.MEASUREMENT_AREA&&y.countPicks()>2){var i=y.getPick(1),n=c.getSnapResultPosition(i,a),s=c.project(n,e);t.canvasX=s.x,t.canvasY=s.y,g=!0,x.onMouseDown(s),this.handleSingleClick(t),b=!b}return!0},this.handleResize=function(){for(var e in w.measurementsList)if(w.measurementsList.hasOwnProperty(e)){var t=w.measurementsList[e];t.indicator&&t.indicator.handleResize()}},this.handleKeyDown=function(e,t){switch(t){case Autodesk.Viewing.KeyCode.BACKSPACE:case Autodesk.Viewing.KeyCode.DELETE:return y&&y.measurementType===c.MeasurementTypes.MEASUREMENT_AREA&&!this.areAllPicksSet()&&y.countPicks()>2?this.deleteCurrentPick():this.deleteCurrentMeasurement(),!0}return!1}}m.init=function(){var e;switch(this.isLeaflet=this.viewer.model.getData().isLeaflet,this.onSelectionAreaClickedBinded=this.onSelectionAreaClicked.bind(this),this.lines.xyz.label||((e=this.lines.xyz.label=this.createMeasurementLabel()).addEventListener("mousewheel",this.viewer.toolController.mousewheel),e.addEventListener("click",this.onSelectionAreaClickedBinded),this.viewer.container.appendChild(e)),this.topologyStatus){case v:this.setFetchingTopology();break;case 2:this.setTopologyAvailable();break;case b:this.setNoTopology()}this.showMeasureResult=!1,this.onCameraChangeBinded=this.onCameraChange.bind(this),this.viewer.addEventListener(d.CAMERA_CHANGE_EVENT,this.onCameraChangeBinded),this.handleButtonUpBinded=this.measureTool.handleButtonUp.bind(this.measureTool),window.addEventListener("mouseup",this.handleButtonUpBinded)},m.createEndpoint=function(e){this.endpoints[e]={};var t=this.endpoints[e].label=this.createSnapResultLabel(e);this.viewer.container.appendChild(t)},m.updateLabelsPosition=function(){var e,t,i,n;for(n in this.endpoints)this.endpoints.hasOwnProperty(n)&&(i=this.endpoints[n].label,e=this.endpoints[n].position,i&&e&&y(i)&&((t=u.project(e,this.viewer)).x=t.x-i.getBoundingClientRect().width/2,t.y=t.y-i.getBoundingClientRect().height/2,i.style.top=t.y+"px",i.style.left=t.x+"px",i.point=e,this.labels.push(i)));for(var s in this.lines)if(this.lines.hasOwnProperty(s)){var a=this.lines[s];if((i=a.label)&&a.p1&&a.p2&&y(i)){if(a.line.visible=a.visible,e={x:(a.p1.x+a.p2.x)/2,y:(a.p1.y+a.p2.y)/2,z:(a.p1.z+a.p2.z)/2},t=u.project(e,this.viewer),i.style.top=t.y-Math.floor(i.clientHeight/2)+"px",i.style.left=t.x-Math.floor(i.clientWidth/2)+"px",this.viewer.model&&this.viewer.model.is2d()){var o=a===this.lines.xyz?0:i.clientHeight,r=u.project(a.p1,this.viewer),l=u.project(a.p2,this.viewer);if(i.clientWidth>=r.distanceTo(l)-this.endpoints[1].label.clientWidth){if(a!==this.lines.xyz){for(s in this.lines.x.line.visible=!1,this.lines.y.line.visible=!1,this.viewer.impl.invalidate(!1,!1,!0),this.lines)if(this.lines.hasOwnProperty(s)&&this.lines[s]!==this.lines.xyz){var c=this.lines[s].label;c&&(c.style.opacity=0)}break}o=i.clientHeight}if(a!==this.lines.xyz){var h=new THREE.Vector3,d=new THREE.Vector3;h.subVectors(this.lines.xyz.p1,this.lines.xyz.p2).normalize(),d.subVectors(a.p1,a.p2).normalize(),h.cross(this.viewer.navigation.getEyeVector()).normalize().dot(d)<0&&(o=-o)}this.alignLabelWithLine(i,a.p1,a.p2,o,this.viewer)}i.style.opacity=1,i.point=e,this.labels.push(i)}}if(this.angleLabel&&(i=this.angleLabel.label)&&this.angleLabel.p1&&this.angleLabel.p2&&y(i)&&(e={x:(this.angleLabel.p1.x+this.angleLabel.p2.x)/2,y:(this.angleLabel.p1.y+this.angleLabel.p2.y)/2,z:(this.angleLabel.p1.z+this.angleLabel.p2.z)/2},t=u.project(e,this.viewer,5),i.style.top=t.y-Math.floor(i.clientHeight/2)+"px",i.style.left=t.x-Math.floor(i.clientWidth/2)+"px",i.point=e,this.labels.push(i)),this.areaLabel&&(i=this.areaLabel.label)&&this.areaLabel.p1&&this.areaLabel.p2&&y(i)&&(e={x:(this.areaLabel.p1.x+this.areaLabel.p2.x)/2,y:(this.areaLabel.p1.y+this.areaLabel.p2.y)/2,z:(this.areaLabel.p1.z+this.areaLabel.p2.z)/2},t=u.project(e,this.viewer),i.style.top=t.y-Math.floor(i.clientHeight/2)+"px",i.style.left=t.x-Math.floor(i.clientWidth/2)+"px",i.point=e,this.labels.push(i)),this.viewer.model&&!this.viewer.model.is2d()){var p,m,g=!1;this.labelsStacked=!1;var b=[];for(m=0;m<this.labels.length;m++)b.push({left:this.labels[m].style.left,top:this.labels[m].style.top});for(m=0;m<this.labels.length&&!g;m++)p=this.labels[m],g=this.labelsOverlapDetection(p,this.labels);if(g){for(m=0;m<this.labels.length;m++)this.labels[m].style.left=b[m].left,this.labels[m].style.top=b[m].top;for(this.stackLabels(this.labels),m=0;m<this.labels.length;m++)p=this.labels[m],this.labelsOverlapDetection(p,this.labels)}}this.labels=[]},m.labelsOverlapDetection=function(e,t){for(var i=!1,n=0;n<t.length;n++){var s=t[n],a=!1;if(e!==s){var o=e.getBoundingClientRect(),r=s.getBoundingClientRect();if(C(r,o)&&(E(r,o)?(k(s,r,o),a=!0):x(r,o)?(M(s,r,o),a=!0):T(r,o)&&(L(s,r,o),a=!0),a)){var l=t.slice(0);l.splice(l.indexOf(e),1),this.labelsOverlapDetection(s,l),s.causeStacking&&e.causeStacking&&(i=!0),s.causeStacking&&this.labelsStacked&&this.stackLabels(this.labels)}}}return i},m.stackLabels=function(e){for(var t=this.lines.xyz.label,i=1;i<e.length;i++){if(e[i].causeStacking){e[i].style.left=t.style.left;var n=e[i-1].getBoundingClientRect(),s=e[i-1]==t?4:0,a=e[i]===t?t.style.top:e[i-1].style.top;e[i].style.top=parseInt(a,10)+n.height+s+"px"}e[i].style.transform=""}this.labelsStacked=!0},m.drawXYZLine=function(e){var t=this,i=e.p1,n=e.p2;if(i&&n){var s=new THREE.Vector3,a=e.geometry=new THREE.Geometry,o=(new THREE.Vector3).subVectors(n,i).normalize().clone().cross(t.viewer.navigation.getEyeVector()).normalize(),r=u.nearestPointInPointToSegment(t.viewer.navigation.getPosition(),i,n),l=t.setScale(r);e.line=this.drawLineSegment(i,n,4,e.material),e.visible=!0,this.segments.push(e),t.showMeasureResult&&(e.tips=[],c(i),c(n))}function c(r){a.vertices=[],s.addVectors(r,o.clone().multiplyScalar(f*l)),a.vertices[0]=s.clone(),s.subVectors(r,o.clone().multiplyScalar(f*l)),a.vertices[1]=s.clone();var c=t.drawLineAsCylinder(a,e.material,A,t.overlayName);t.setCylinderScale(c,i,n),c.visible=!0,e.tips.push(c)}},m.redrawDashedLine=function(){if(this.dashedLine.p1&&this.dashedLine.p2){this.viewer.impl.removeMultipleOverlays(this.overlayName,this.dashedLine.line);var e=this.setScale(this.dashedLine.p2),t=2*e,i=1*e;return this.dashedLine.line=this.drawDashedLine(this.dashedLine.p2,this.dashedLine.p1,t,i,this.lines.xyz.material,3,this.overlayName),this.dashedLine.line}},m.drawLineSegment=function(e,t,i,n,s){var a;if(s)this.dashedLine.p1=e,this.dashedLine.p2=t,a=this.redrawDashedLine();else{var o=new THREE.Geometry;o.vertices.push(e),o.vertices.push(t),a=this.drawLineAsCylinder(o,n,i,this.overlayName),this.setCylinderScale(a,e,t)}return a.visible=!0,a},m.drawSurface=function(e){var t=new Autodesk.Viewing.Extensions.CompGeom.ContourSet;if(t.addContour(e),t.triangulate(),t.triangulationFailed)return!1;var i=t.toPolygonMesh(),n=new THREE.Mesh(i,this.surfaceColor);return this.viewer.impl.addOverlay(this.overlayName,n),!0},m.drawSegmentAndPush=function(e,t,i){if(e&&t){var n=this.drawLineSegment(e,t,4,this.lines.xyz.material,i);if(!i){var s={line:n,p1:e,p2:t};this.segments.push(s)}}},m.renderAreaMeasurement=function(e){for(var t,i,n=this.measurement.countPicks(),s=[],a=1;a<n;a++)t=u.getSnapResultPosition(e[a],this.viewer),i=u.getSnapResultPosition(e[a+1],this.viewer),this.drawSegmentAndPush(t,i),s.push(t);n>2&&(t=u.getSnapResultPosition(e[1],this.viewer),this.drawSegmentAndPush(t,i,!this.measurement.closedArea),u.isEqualVectors(t,i,u.EPSILON)||s.push(i),0!==this.measurement.area&&this.drawSurface(s)&&(this.showAreaLabel(h(s)),this.updateArea()))},m.clearAngleMeshes=function(){this.angleArc&&(this.viewer.impl.removeOverlay(this.overlayName,this.angleArc),this.angleArc=null),this.angleOutline.length>0&&(this.viewer.impl.removeMultipleOverlays(this.overlayName,this.angleOutline),this.angleOutline.length=0)},m.drawAngle=function(e,t,i,n,s,a){this.materialAngle||(this.materialAngle=new THREE.MeshPhongMaterial({color:10066329,ambient:10066329,opacity:.5,transparent:!0,depthTest:!1,depthWrite:!1,side:THREE.DoubleSide}),this.materialAngleOutline=new THREE.MeshBasicMaterial({color:16750848,depthTest:!1,depthWrite:!1})),u.createCommonOverlay(this.viewer,this.overlayName),this.clearAngleMeshes();var o=Math.min(e.distanceTo(t),e.distanceTo(i))/4,r=new THREE.CircleGeometry(o,100,0,s*Math.PI/180),l=new THREE.Mesh(r,this.surfaceColor),c=l.geometry.vertices[0].clone();l.geometry.vertices.push(c),l.position.set(e.x,e.y,e.z);var h=l.position.clone();h.add(n),l.lookAt(h),l.updateMatrixWorld();var d=l.geometry.vertices[1].clone(),p=l.geometry.vertices[l.geometry.vertices.length-2].clone();d.applyMatrix4(l.matrixWorld),p.applyMatrix4(l.matrixWorld);var m=new THREE.Vector3,g=new THREE.Vector3,b=new THREE.Vector3,v=new THREE.Vector3;m.subVectors(d,e),g.subVectors(p,e),b.subVectors(t,e),v.subVectors(i,e);var f,A=m.angleTo(b),w=m.angleTo(v),y=g.angleTo(b),E=g.angleTo(v);f=(A<=.001&&A>=-.001||w<=.001&&w>=-.001)&&(y<=.001&&y>=-.001||E<=.001&&E>=-.001)?0:(A<=Math.PI+.001&&A>=Math.PI-.001||w<=Math.PI+.001&&w>=Math.PI-.001)&&(y<=Math.PI+.001&&y>=Math.PI-.001||E<=Math.PI+.001&&E>=Math.PI-.001)?Math.PI:A<=y+.001&&A>=y-.001||A<=E+.001&&A>=E-.001?A:w;var x=new THREE.Matrix4;x.makeRotationAxis(n,f),x.multiply(l.matrix),l.matrix=x,l.rotation.setFromRotationMatrix(l.matrix),l.updateMatrixWorld(),d=l.geometry.vertices[1].clone(),p=l.geometry.vertices[l.geometry.vertices.length-2].clone(),d.applyMatrix4(l.matrixWorld),p.applyMatrix4(l.matrixWorld),m.subVectors(d,e),g.subVectors(p,e),A=m.angleTo(b),w=m.angleTo(v),y=g.angleTo(b),E=g.angleTo(v),A>=.001&&w>=.001&&((x=new THREE.Matrix4).makeRotationAxis(n,2*-f),x.multiply(l.matrix),l.matrix=x,l.rotation.setFromRotationMatrix(l.matrix));var T=new THREE.CircleGeometry(o,100,0,s*Math.PI/180);T.vertices.splice(0,1),l.updateMatrixWorld(),T.applyMatrix(l.matrixWorld),this.angleOutline=this.drawEdgeAsCylinder(T,this.lines.xyz.material,2,0,this.getNewCylinderGeometry()),this.angleArc=l,this.viewer.impl.addOverlay(this.overlayName,this.angleArc),this.viewer.impl.addMultipleOverlays(this.overlayName,this.angleOutline),a.copy(l.geometry.vertices[Math.round(l.geometry.vertices.length/2)-1]),a.applyMatrix4(l.matrixWorld);var C=new THREE.Vector3;C.subVectors(a,e).normalize(),C.multiplyScalar(o/2),a.add(C)},m.renderAngleMeasurement=function(e){for(var t,i,n=this.measurement.countPicks(),s=[],a=1;a<n;a++)t=u.getSnapResultPosition(e[a],this.viewer),i=u.getSnapResultPosition(e[a+1],this.viewer),this.drawSegmentAndPush(t,i),t&&s.push(t);if(i&&s.push(i),3===s.length&&this.measurement.angle){var o=new THREE.Vector3,r=new THREE.Vector3,l=new THREE.Vector3;r.subVectors(s[0],s[1]),l.subVectors(s[1],s[2]),o.crossVectors(r,l),o.normalize();var c=new THREE.Vector3;this.drawAngle(s[1],s[0],s[2],o,this.measurement.angle,c),this.showAngleLabel(c),this.updateAngle()}},m.createDistanceLabel=function(e){var t=e.label=this.createMeasurementLabel();if(function(e,t){var i=e.querySelector(".measure-length-text");i&&(i.style.display=t?"":"none")}(t,e===this.lines.xyz),e.axis){t.className=e.className;var i=document.createElement("div");i.className="measure-label-axis-icon "+e.iconText,i.innerText=e.iconText,t.insertBefore(i,t.firstChild),d.isMobileDevice()||u.safeToggle(t,"enableTransition",!0)}return this.viewer.container.appendChild(t),t},m.renderDistanceMeasurement=function(e,t){var i=this;function n(e,t,n,s,a,o,r,l){var c,h=e.line,d=e.label,p=new THREE.Vector3(t,n,s),m=new THREE.Vector3(a,o,r);if(e===i.lines.x&&m.x>p.x?(c=p.clone(),p=m.clone(),m=c.clone()):e===i.lines.y&&m.y>p.y?(c=p.clone(),p=m.clone(),m=c.clone()):e===i.lines.z&&m.z>p.z&&(c=p.clone(),p=m.clone(),m=c.clone()),e.line=null,d?i.hideLabel(d):d=i.createDistanceLabel(e),(i.isLeaflet&&e!==i.lines.z||p.distanceTo(m)>=u.EPSILON)&&l)if(e.p1=p,e.p2=m,e===i.lines.xyz)i.drawXYZLine(e),i.showLabel(d),i.updateDistance();else{h=e.line=i.drawLineSegment(p,m,w,e.material);var g=!i.simple&&i.showMeasureResult;h.visible=g,e.visible=g,g?i.showLabel(d):i.hideLabel(d)}}n(this.lines.xyz,e.x,e.y,e.z,t.x,t.y,t.z,!0);var s=this.viewer.navigation.getAlignedUpVector(),a=Math.abs(s.x),o=Math.abs(s.y),r=Math.abs(s.z),l=function(e,t){return i.tmpVector.subVectors(e,t),i.tmpVector.normalize(),!u.isParallel(i.tmpVector,i.xAxis)&&!u.isParallel(i.tmpVector,i.yAxis)&&!u.isParallel(i.tmpVector,i.zAxis)}(e,t);r>a&&r>o?(n(this.lines.x,e.x,e.y,e.z,t.x,e.y,e.z,l),n(this.lines.y,t.x,e.y,e.z,t.x,t.y,e.z,l),n(this.lines.z,t.x,t.y,e.z,t.x,t.y,t.z,l)):o>a&&o>r?(n(this.lines.x,e.x,e.y,e.z,t.x,e.y,e.z,l),n(this.lines.z,t.x,e.y,e.z,t.x,e.y,t.z,l),n(this.lines.y,t.x,e.y,t.z,t.x,t.y,t.z,l)):(n(this.lines.y,e.x,e.y,e.z,e.x,t.y,e.z,l),n(this.lines.z,e.x,t.y,e.z,e.x,t.y,t.z,l),n(this.lines.x,e.x,t.y,t.z,t.x,t.y,t.z,l))},m.updateResults=function(){this.updateDistance(),this.updateAngle(),this.updateArea(),setTimeout(function(){this.viewer.impl&&this.updateLabelsPosition()}.bind(this),0)},m.updateDistance=function(){function e(e,t){e&&(e.style.width=t)}function t(e){return e?e.clientWidth:0}Object.keys(this.lines).forEach(function(t){e(this.lines[t].label,"")}.bind(this)),B(this.lines.x.label,"~ "+this.measureTool.getDistanceX(this.measurement)),B(this.lines.y.label,"~ "+this.measureTool.getDistanceY(this.measurement)),B(this.lines.z.label,"~ "+this.measureTool.getDistanceZ(this.measurement)),S(this.lines.xyz.label,"~ "+this.measureTool.getDistanceXYZ(this.measurement)),this.viewer.model&&this.viewer.model.is3d()&&setTimeout(function(){var i=Math.max(t(this.lines.x.label),t(this.lines.y.label),t(this.lines.z.label),t(this.lines.xyz.label));Object.keys(this.lines).forEach(function(t){e(this.lines[t].label,i+"px")}.bind(this))}.bind(this),0)},m.updateAngle=function(){S(this.angleLabel.label,"~ "+this.measureTool.getAngle(this.measurement))},m.updateArea=function(){S(this.areaLabel.label,"~ "+this.measureTool.getArea(this.measurement))},m.setSimple=function(e){if(this.simple!=e){this.simple=e;var t=!e;this.setLineVisible(this.lines.x,t),this.setLineVisible(this.lines.y,t),this.setLineVisible(this.lines.z,t),this.updateLabelsPosition(),this.viewer.impl.invalidate(!1,!1,!0)}},m.setLineVisible=function(e,t){e.line&&(e.line.visible=t,e.visible=t,e.label&&(t?this.showLabel(e.label):(this.hideLabel(e.label),e.label.style.opacity=0)))},m.enableLabelsTouchEvents=function(e){var t=e?"all":"none";this.lines.xyz.label&&(this.lines.xyz.label.style.pointerEvents=t),this.angleLabel.label&&(this.angleLabel.label.style.pointerEvents=t),this.areaLabel.label&&(this.areaLabel.label.style.pointerEvents=t)},m.setLabelsZIndex=function(e){for(var t in this.lines)if(this.lines.hasOwnProperty(t)){var i=this.lines[t];i.label&&(i.label.style.zIndex=e)}for(t in this.angleLabel&&this.angleLabel.label&&(this.angleLabel.label.style.zIndex=e),this.areaLabel&&this.areaLabel.label&&(this.areaLabel.label.style.zIndex=e),this.endpoints)if(this.endpoints.hasOwnProperty(t)){var n=this.endpoints[t];n.label&&(n.label.style.zIndex=e-1)}},m.focusLabels=function(){this.setLabelsZIndex(3)},m.unfocusLabels=function(){this.setLabelsZIndex(2)},m.clear=function(){var e;for(e in this.endpoints)if(this.endpoints.hasOwnProperty(e)){var t=this.endpoints[e];t.label&&this.hideLabel(t.label)}for(e in this.lines)if(this.lines.hasOwnProperty(e)){var i=this.lines[e];i.line&&(i.line.visible=!1,i.visible=!1,i.tips&&i.tips.forEach(function(e){e.visible=!1})),i.label&&(this.hideLabel(i.label),i.label.style.opacity=0,i.label.style.zIndex=2)}this.angleLabel&&this.angleLabel.label&&this.hideLabel(this.angleLabel.label),this.areaLabel&&this.areaLabel.label&&this.hideLabel(this.areaLabel.label),this.clearSelectionAreas(),this.segments=[],this.dashedLine={},this.viewer.impl.clearOverlay(this.overlayName),u.createCommonOverlay(this.viewer,this.overlayName)},m.hideClick=function(e){for(var t in l.prototype.hideClick.call(this,e),this.lines)if(this.lines.hasOwnProperty(t)){var i=this.lines[t];i.line&&(i.line.visible=!1,i.visible=!1,i.tips&&i.tips.forEach(function(e){e.visible=!1})),i.label&&(this.hideLabel(i.label),i.label.style.opacity=0)}this.angleLabel&&this.angleLabel.label&&this.hideLabel(this.angleLabel.label),this.areaLabel&&this.areaLabel.label&&this.hideLabel(this.areaLabel.label),this.enableSelectionAreas(i.selectionArea,!1)},m.destroy=function(){var e;for(e in l.prototype.destroy.call(this),this.lines)if(this.lines.hasOwnProperty(e)){var t=this.lines[e];t.line&&(this.viewer.impl.clearOverlay(self.overlayName),t.material=t.line=t.geometry=null),t.label&&("xyz"===e&&(t.label.addEventListener("mousewheel",this.viewer.toolController.mousewheel),t.label.removeEventListener("click",this.onSelectionAreaClickedBinded)),t.label.parentNode.removeChild(t.label),t.label=null),t.material=t.line=t.geometry=t.label=t.p1=t.p2=null}this.clearAngleMeshes(),this.angleLabel&&this.angleLabel.label&&(this.angleLabel.label.parentNode.removeChild(this.angleLabel.label),this.angleLabel.label.removeEventListener("mousewheel",this.viewer.toolController.mousewheel),this.angleLabel.label.removeEventListener("click",this.onSelectionAreaClickedBinded),this.angleLabel.label=this.angleLabel.p1=this.angleLabel.p2=null),this.areaLabel&&this.areaLabel.label&&(this.areaLabel.label.parentNode.removeChild(this.areaLabel.label),this.areaLabel.label.removeEventListener("mousewheel",this.viewer.toolController.mousewheel),this.areaLabel.label.removeEventListener("click",this.onSelectionAreaClickedBinded),this.areaLabel.label=this.areaLabel.p1=this.areaLabel.p2=null),this.viewer.impl.overlayScenes[this.overlayName]&&this.viewer.impl.removeOverlayScene(this.overlayName),this.viewer.removeEventListener(d.CAMERA_CHANGE_EVENT,this.onCameraChangeBinded),window.removeEventListener("mouseup",this.handleButtonUpBinded)},m.clearXYZLine=function(){this.viewer.impl.removeOverlay(this.overlayName,this.lines.xyz.line),this.lines.xyz.tips&&this.lines.xyz.tips.forEach(function(e){this.viewer.impl.removeOverlay(this.overlayName,e)}.bind(this))},m.updateScale=function(){var e,t=this;for(e in this.angleOutline.forEach(function(e){return t.setCylinderScale(e)}),this.lines)if(this.lines.hasOwnProperty(e)){var i=this.lines[e];i.line&&i!==this.lines.xyz&&this.setCylinderScale(i.line,i.p1,i.p2)}for(e in this.segments)if(this.segments.hasOwnProperty(e)){var n=this.segments[e];n.line&&this.setCylinderScale(n.line,n.p1,n.p2)}this.measurement.measurementType===u.MeasurementTypes.MEASUREMENT_DISTANCE&&this.measurement.isComplete()&&(this.clearXYZLine(),this.drawXYZLine(this.lines.xyz))},m.setNoTopology=function(){this.topologyStatus=b,this.lines.xyz.label&&(P(this.lines.xyz.label,!1,this.topologyStatus),this.lines.xyz.label.classList.remove("fetching-topology"))},m.setFetchingTopology=function(){this.topologyStatus=v,this.lines.xyz.label&&(P(this.lines.xyz.label,!0,this.topologyStatus),this.lines.xyz.label.classList.add("fetching-topology"))},m.setTopologyAvailable=function(){this.topologyStatus=2,this.lines.xyz.label&&(P(this.lines.xyz.label,!1,this.topologyStatus),this.lines.xyz.label.classList.remove("fetching-topology"))},m.createMeasurementLabel=function(){var e=document.createElement("div");e.className="measure-length";var t=document.createElement("div");t.className="measure-fetching-topology",t.style.display="none",e.appendChild(t);var i=document.createElement("div");i.className="measure-length-text",e.appendChild(i);var n=document.createElement("div");return n.className="measure-delta-text",e.appendChild(n),e.causeStacking=!0,d.isMobileDevice()||u.safeToggle(e,"enable-hover",!0),e},m.createSnapResultLabel=function(e){var t=document.createElement("div");t.className="measure-label";var i=document.createElement("div");if(i.className="measure-label-icon",t.appendChild(i),d.isTouchDevice()){this.initLabelMobileGestures(t,e,this.measureTool);var n=document.createElement("div");n.className="measure-label-hit-area",t.appendChild(n)}return d.isMobileDevice()||(this.initMouseEvent(t,e),t.addEventListener("mousewheel",this.viewer.toolController.mousewheel),u.safeToggle(t,"enable-hover",!0)),t.causeStacking=!1,t},m.showAngleLabel=function(e){var t=this.angleLabel.label;t||(t=this.angleLabel.label=this.createMeasurementLabel(),this.viewer.container.appendChild(t),t.addEventListener("mousewheel",this.viewer.toolController.mousewheel),t.addEventListener("click",this.onSelectionAreaClickedBinded)),this.updateAngle(),this.showLabel(t),this.angleLabel.p1=e.clone(),this.angleLabel.p2=e.clone()},m.showAreaLabel=function(e){var t=this.areaLabel.label;t||(t=this.areaLabel.label=this.createMeasurementLabel(),this.viewer.container.appendChild(t),t.addEventListener("mousewheel",this.viewer.toolController.mousewheel),t.addEventListener("click",this.onSelectionAreaClickedBinded)),this.updateArea(),this.showLabel(t),this.areaLabel.p1=e,this.areaLabel.p2=e},m.onSelectionAreaClicked=function(){this.measureTool.selectMeasurementById(this.measurement.id)},m.createSelectionArea=function(){var e=document.createElement("div");return e.id="measurement-selection-area-"+this.measurement.id,this.viewer.container.appendChild(e),e.className="measure-selection-area",e.style.display="none",e.addEventListener("mousewheel",this.viewer.toolController.mousewheel),e.addEventListener("click",this.onSelectionAreaClickedBinded),e},m.updateSelectionArea=function(){this.segments.forEach(function(e){if(e.p1&&e.p2){var t=u.project(e.p1,this.viewer),i=u.project(e.p2,this.viewer);e.selectionArea||(e.selectionArea=this.createSelectionArea());var n=e.selectionArea,s=new THREE.Vector2;n.style.top=t.y-7.5+"px",n.style.left=t.x+"px",n.style.width=s.subVectors(t,i).length()+"px",n.style.height="15px";var a,o=t.x-i.x,r=t.y-i.y;a=180*Math.atan2(-r,-o)/Math.PI,n.style.transform="rotate("+a+"deg)",n.style.transformOrigin="0px 7.5px"}}.bind(this)),this.measureTool.areAllPicksSet()&&this.enableSelectionAreas(!0)},m.clearSelectionAreas=function(){this.segments.forEach(function(e){if(e.selectionArea){e.selectionArea.removeEventListener("mousewheel",this.viewer.toolController.mousewheel),e.selectionArea.removeEventListener("click",this.onSelectionAreaClickedBinded);var t=document.getElementById("measurement-selection-area-"+this.measurement.id);t&&t.parentNode.removeChild(t),e.selectionArea=null}}.bind(this))},m.enableSelectionAreas=function(e){this.segments.forEach(function(t){t.selectionArea&&(t.selectionArea.style.display=e?"block":"none")}.bind(this))},m.render=function(e,t){l.prototype.render.call(this,e,t),this.updateSelectionArea()},m.onCameraChange=function(){this.redrawDashedLine(),this.updateSelectionArea(),this.hideLabelsOutsideOfView(),this.updateLabelsPosition()},m.handleResize=function(){this.redrawDashedLine(),this.updateSelectionArea(),this.updateLabelsPosition()};var R=Autodesk.Viewing,N=Autodesk.Viewing.MeasureCommon;function I(e,t,i){l.call(this,e,t,i),this.calibrationTool=i,this.calibrationLabel=null,this.endpoints=null,this.tmpVector=new THREE.Vector3,this.p1=null,this.p2=null,this.rubberbandDefaultMaterial=new THREE.MeshBasicMaterial({color:15249964,opacity:1,transparent:!1,depthTest:!1,depthWrite:!1,side:THREE.DoubleSide}),this.rubberbandSnappedMaterial=new THREE.MeshBasicMaterial({color:23502,opacity:1,transparent:!1,depthTest:!1,depthWrite:!1,side:THREE.DoubleSide}),this.rubberbandTipMaterial=new THREE.MeshBasicMaterial({color:0,opacity:1,transparent:!1,depthTest:!1,depthWrite:!1,side:THREE.DoubleSide})}I.prototype=Object.create(l.prototype),I.prototype.constructor=I;var D=I.prototype;function z(e,t){return e.right>=t.left&&e.right<=t.right}function O(e,t){return e.left>=t.left&&e.left<=t.right}function G(e,t){return e.left<=t.left&&e.right>=t.right}function U(e,t){return e.top<t.bottom&&e.bottom>t.top}function Y(e,t,i){e.style.left=parseInt(e.style.left,10)-(t.right-i.left)+"px"}function H(e,t,i){e.style.left=parseInt(e.style.left,10)+(i.right-t.left)+"px"}function F(e,t,i){e.style.top=parseInt(e.style.top,10)+(i.bottom-t.top)+"px"}D.createEndpoint=function(e){this.endpoints[e]={},this.endpoints[e].position=null;var t=this.endpoints[e].label=document.createElement("div");t.className="calibration-endpoint",this.viewer.container.appendChild(t);var i=document.createElement("div");i.className="calibration-endpoint-text",i.textContent=e.toString(),t.appendChild(i),R.isTouchDevice()&&this.initLabelMobileGestures(t,e,this.calibrationTool),R.isMobileDevice()||(N.safeToggle(t,"enable-hover",!0),this.initMouseEvent(t,e),t.addEventListener("mousewheel",this.viewer.toolController.mousewheel))},D.init=function(){if(N.createCommonOverlay(this.viewer,this.overlayName),!this.calibrationLabel){this.calibrationLabel=document.createElement("div"),this.calibrationLabel.className="calibration-label",this.hideLabel(this.calibrationLabel),this.viewer.container.appendChild(this.calibrationLabel),this.calibrationLabel.addEventListener("mousewheel",this.viewer.toolController.mousewheel);var e=document.createElement("div");e.className="calibration-label-text",this.calibrationLabel.appendChild(e)}this.endpoints=[],this.handleButtonUpBinded=this.calibrationTool.handleButtonUp.bind(this.calibrationTool),window.addEventListener("mouseup",this.handleButtonUpBinded),this.onCameraChangeBinded=this.onCameraChange.bind(this),this.viewer.addEventListener(R.CAMERA_CHANGE_EVENT,this.onCameraChangeBinded)},D.destroy=function(){this.clear(),l.prototype.destroy.call(this),this.calibrationLabel&&(this.calibrationLabel.removeEventListener("mousewheel",this.viewer.toolController.mousewheel),this.viewer.container.removeChild(this.calibrationLabel),this.calibrationLabel=null),this.viewer.impl.clearOverlay(this.overlayName),this.viewer.impl.removeOverlayScene(this.overlayName),window.removeEventListener("mouseup",this.handleButtonUpBinded),this.viewer.removeEventListener(R.CAMERA_CHANGE_EVENT,this.onCameraChangeBinded)},D.clearRubberband=function(){this.viewer.impl.clearOverlay(this.overlayName)},D.clear=function(){for(var e in this.clearRubberband(),this.hideLabel(this.calibrationLabel),this.endpoints)this.endpoints.hasOwnProperty(e)&&(this.hideClick(e),this.endpoints[e].position=null)},D.updateLabelValue=function(e){e&&""!==e?(this.calibrationLabel.childNodes[0].setAttribute("data-i18n",e),this.calibrationLabel.childNodes[0].textContent=R.i18n.translate(e),this.showLabel(this.calibrationLabel),this.calibrationTool.render()):(this.calibrationLabel.childNodes[0].textContent=null,this.hideLabel(this.calibrationLabel))},D.changeLabelClickableMode=function(e){this.calibrationLabel.childNodes[0].style.pointerEvents=e?"all":"none"},D.showAddCalibrationLabel=function(){var e=this;this.updateLabelValue("Add Calibration"),this.changeLabelClickableMode(!0),this.calibrationTool.render(),this.calibrationLabel.addEventListener("click",function t(){e.calibrationLabel.childNodes[0].style.pointerEvents="none",e.calibrationTool.render(),e.updateLabelValue(null),e.calibrationTool.showPanel(),e.calibrationLabel.removeEventListener("click",t)})},D.updateLabelsPosition=function(){for(var e=1;e<=Object.keys(this.endpoints).length;e++)if(this.endpoints[e].position){var t=this.endpoints[e].label,i=N.project(this.endpoints[e].position,this.viewer,15);t.style.left=i.x-parseInt(t.clientWidth)/2+"px",t.style.top=i.y-parseInt(t.clientHeight)/2+"px",t.point=this.endpoints[e].position,this.labelsOverlapDetection(this.endpoints[e].label,this.endpoints)}this.hideLabelsOutsideOfView()},D.labelsOverlapDetection=function(e,t){for(var i=1;i<=Object.keys(t).length;i++){var n=t[i].label;if(e!==n){var s=e.getBoundingClientRect(),a=n.getBoundingClientRect();U(a,s)&&(z(a,s)?Y(n,a,s):O(a,s)?H(n,a,s):G(a,s)&&F(n,a,s))}}},D.renderCalibrationLabel=function(){if(this.showMeasureResult&&this.calibrationLabel&&this.p1&&this.p2){var e={x:(this.p1.x+this.p2.x)/2,y:(this.p1.y+this.p2.y)/2,z:(this.p1.z+this.p2.z)/2},t=N.project(e,this.viewer);this.labelPosition=new THREE.Vector2(t.x,t.y),this.calibrationLabel.childNodes[0].textContent&&this.showLabel(this.calibrationLabel),this.calibrationLabel.style.top=this.labelPosition.y-Math.floor(this.calibrationLabel.clientHeight/2)+"px",this.calibrationLabel.style.left=this.labelPosition.x-Math.floor(this.calibrationLabel.clientWidth/2)+"px",this.calibrationLabel.point=e,this.viewer.model.is2d()&&this.alignLabelWithLine(this.calibrationLabel,this.p1,this.p2,this.calibrationLabel.clientHeight,this.viewer)}},D.drawMeasurementLineTip=function(e,t,i,n){var s=new THREE.Vector3,a=new THREE.Geometry,o=this.setScale(e);n=n?-1:1;var r=this.snapper.isSnapped()&&!this.showMeasureResult?this.rubberbandSnappedMaterial:this.rubberbandTipMaterial;s.addVectors(e,i.clone().multiplyScalar(5*o)),a.vertices[0]=s.clone(),s.subVectors(e,i.clone().multiplyScalar(5*o)),a.vertices[1]=s.clone(),this.drawLineAsCylinder(a,r,1.5,this.overlayName),a.vertices[0]=e,s.subVectors(e,t.clone().multiplyScalar(5*o*n)),a.vertices[1]=s.clone(),this.drawLineAsCylinder(a,r,1.5,this.overlayName),s.addVectors(e,i.clone().multiplyScalar(3*o)),a.vertices[0]=s.clone(),s.subVectors(e,i.clone().multiplyScalar(3*o)),a.vertices[1]=s.clone(),this.drawLineAsCylinder(a,this.rubberbandDefaultMaterial,2,this.overlayName),s.addVectors(e,i.clone().multiplyScalar(3*o)),s.addVectors(s,t.clone().multiplyScalar(3*o)),a.vertices[0]=s.clone(),s.subVectors(e,i.clone().multiplyScalar(3*o)),s.subVectors(s,t.clone().multiplyScalar(3*o)),a.vertices[1]=s.clone(),this.drawLineAsCylinder(a,this.rubberbandDefaultMaterial,2,this.overlayName)},D.renderDistanceMeasurement=function(e,t){if(this.viewer.impl.clearOverlay(this.overlayName),e&&t){var i=new THREE.Geometry,n=(new THREE.Vector3).subVectors(t,e).normalize(),s=n.clone().cross(this.viewer.navigation.getEyeVector()).normalize(),a=this.setScale(e),o=2*a,r=1*a,l=(Math.abs(e.x-t.x)<=.1||Math.abs(e.y-t.y)<=.1||this.snapper.getSnapResult().isPerpendicular)&&!this.showMeasureResult?this.rubberbandSnappedMaterial:this.rubberbandDefaultMaterial;this.showMeasureResult?(i.vertices[0]=e,i.vertices[1]=t,this.drawLineAsCylinder(i,l,3,this.overlayName)):this.drawDashedLine(e,t,o,r,l,3,this.overlayName),this.drawMeasurementLineTip(e,n,s,!1),this.showMeasureResult&&this.drawMeasurementLineTip(t,n,s,!0),this.p1=e,this.p2=t,this.renderCalibrationLabel()}},D.onCameraChange=function(){this.measurement.isComplete()&&this.renderDistanceMeasurement(this.p1,this.p2),this.updateLabelsPosition()};var W=Autodesk.Viewing,Z=Autodesk.Viewing.Extensions,j=Autodesk.Viewing.Private,Q=Autodesk.Viewing.UI,X=Autodesk.Viewing.MeasureCommon,J=Q&&Q.DockingPanel||function(){return function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}}(),q=Z&&Z.ViewerPanelMixin||function(){},_=function(e,t,i,n,s){var a=this;(s=s||{}).addFooter=!1,J.call(this,t.container,i,n,s),this.viewer=t,this.calibrationTool=e,this.parentContainer=t.container,this.container.style.left="0px",this.container.style.top="0px",this.container.style.resize="none",this.container.classList.add("calibration-panel"),this.addEventListener(this.closer,"click",function(e){a.setVisible(!1),a.calibrationTool.clearSize(),a.calibrationTool.showAddCalibrationLabel()}),s.heightAdjustment||(s.heightAdjustment=40),s.marginTop||(s.marginTop=0),s.left=!1,this.createScrollContainer(s),this.calibrationMenu=document.createElement("div"),this.scrollContainer.appendChild(this.calibrationMenu),this.table=document.createElement("table"),this.table.className="adsk-lmv-tftable calibration-table",this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.calibrationMenu.appendChild(this.table),this.row=this.tbody.insertRow(0),this.requestedSizeTextbox=document.createElement("input"),this.requestedSizeTextbox.className="docking-panel-textbox",this.requestedSizeTextbox.type="text",this.requestedSizeTextbox.autofocus="true",this.addEventListener(this.requestedSizeTextbox,"keyup",function(e){var t=a.requestedSizeTextbox.value;""!==t&&""===t.split(".")[0]&&(a.requestedSizeTextbox.value="0"+t),a.updateLabel()}),this.addEventListener(this.requestedSizeTextbox,"keypress",function(e){var t=e.key||String.fromCharCode(e.keyCode);if("Backspace"!=t&&"ArrowLeft"!=t&&"ArrowRight"!=t){if(e.keyCode==W.KeyCode.ESCAPE)return a.setVisible(!1),a.calibrationTool.clearSize(),void a.calibrationTool.showAddCalibrationLabel();var i=a.requestedSizeTextbox.value,n=a.requestedSizeTextbox.selectionStart;if("."!=(i=[i.slice(0,n),t,i.slice(n)].join(""))){var s=a.units[a.unitList.selectedIndex].simpleInput;(!K(i)||s&&(!$(i)||Autodesk.Viewing.Private.calculatePrecision(i)>a.calibrationTool.getMaxPrecision()))&&e.preventDefault()}}});var o=this.row.insertCell(0);this.caption=document.createElement("div"),this.caption.setAttribute("data-i18n","Define Size"),this.caption.textContent=W.i18n.translate("Define Size"),o.appendChild(this.caption),(o=this.row.insertCell(1)).appendChild(this.requestedSizeTextbox),this.units=[{name:"Feet and fractional inches",units:"ft-and-fractional-in",matches:["ft-and-fractional-in"],simpleInput:!1},{name:"Feet and decimal inches",units:"ft-and-decimal-in",matches:["ft-and-decimal-in"],simpleInput:!1},{name:"Meters",units:"m",matches:["m"],simpleInput:!0},{name:"Centimeters",units:"cm",matches:["cm"],simpleInput:!0},{name:"Millimeters",units:"mm",matches:["mm"],simpleInput:!0}];for(var r=[],l=0;l<this.units.length;++l)r.push(this.units[l].name);this.unitList=new j.OptionDropDown("Unit type",this.tbody,r,0,null,{paddingLeft:0,paddingRight:15}),this.addEventListener(this.unitList,"change",function(e){a.updateLabel()});var c=document.createElement("div");c.classList.add("docking-panel-primary-button"),c.classList.add("calibration-button"),c.setAttribute("data-i18n","Set Calibration"),c.textContent=W.i18n.translate("Set Calibration"),c.addEventListener("click",function(){var e=a.unitList.selectedIndex,t=a.units[e].units;a.calibrationTool.calibrate(t,a.requestedSizeTextbox.value)},!1),this.calibrationMenu.appendChild(c)},K=function(e){return e.match(/^(\d+)/)},$=function(e){return e+="0",!isNaN(parseFloat(e))&&!isNaN(+e)&&parseFloat(e)>=0};_.prototype=Object.create(J.prototype),q.call(_.prototype),_.prototype.uninitialize=function(){this.viewer=null,J.prototype.uninitialize.call(this)},_.prototype.findUnits=function(){var e,t,i=this.calibrationTool.getCurrentUnits();for(e=0;e<this.units.length;++e){var n=this.units[e].matches;if(n)for(t=0;t<n.length;++t)if(n[t]===i)return e}return 0},_.prototype.setPanelValue=function(e){this.unitList.setSelectedIndex(this.findUnits()),this.requestedSizeTextbox.value=e},_.prototype.updateLabel=function(){var e=this.unitList.selectedIndex,t=this.units[e].units,i=this.requestedSizeTextbox.value,n=Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(i,t),s=Autodesk.Viewing.Private.formatValueWithUnits(n,t,3,Autodesk.Viewing.Private.calculatePrecision(i));""===i?this.calibrationTool.updateLabelValue(null):isNaN(n)||this.calibrationTool.updateLabelValue(s)},_.prototype.updatePanelPosition=function(e,t,i,n){var s,a,o=parseInt(this.container.getBoundingClientRect().width),r=parseInt(this.container.getBoundingClientRect().height);if(e&&t&&i){t=X.project(t,this.viewer),i=X.project(i,this.viewer);var l,c=(new THREE.Vector2).copy(t).sub(i).normalize();l=t.x<i.x?new THREE.Vector2(c.y,-c.x):new THREE.Vector2(-c.y,c.x);var h=n+Math.sqrt(Math.pow(o,2)+Math.pow(r,2))/2;l=l.multiplyScalar(h);var d=e.sub(l);s=d.x-Math.floor(o/2),a=d.y-Math.floor(r/2),(s<0||s+o>this.viewer.canvas.clientWidth||a<0||a+r>this.viewer.canvas.clientHeight)&&(s=Math.floor((this.viewer.canvas.clientWidth-o)/2),a=Math.floor((this.viewer.canvas.clientHeight-r)/2))}else s=Math.floor((this.viewer.canvas.clientWidth-o)/2),a=Math.floor((this.viewer.canvas.clientHeight-r)/2);this.container.style.left=s+"px",this.container.style.top=a+"px"};var ee=function(e,t,i,n,s){var a=this;(s=s||{}).addFooter=!1,J.call(this,t.container,i,n,s),this.viewer=t,this.measureExt=e,this.parentContainer=t.container,this.container.classList.add("calibration-panel"),this.container.style.width="380px",this.container.style.height="190px",s.heightAdjustment||(s.heightAdjustment=70),s.marginTop||(s.marginTop=0),s.left=!1,this.createScrollContainer(s),this.dialogBox=document.createElement("div"),this.scrollContainer.appendChild(this.dialogBox);var o=document.createElement("div");o.className="calibration-text";var r="Calibration Message";o.setAttribute("data-i18n",r),o.textContent=W.i18n.translate(r),this.dialogBox.appendChild(o);var l=document.createElement("div");l.className="calibration-buttons-wrapper",this.dialogBox.appendChild(l);var c=document.createElement("div");c.classList.add("docking-panel-secondary-button"),c.classList.add("calibration-button-left"),c.setAttribute("data-i18n","Cancel"),c.textContent=W.i18n.translate("Cancel"),c.addEventListener("click",function(){a.setVisible(!1)},!1),l.appendChild(c);var h=document.createElement("div");h.classList.add("docking-panel-primary-button"),h.classList.add("calibration-button-right"),h.setAttribute("data-i18n","Calibrate Now"),h.textContent=W.i18n.translate("Calibrate Now"),h.addEventListener("click",function(){a.measureExt.enableCalibrationTool(!0),a.setVisible(!1)},!1),l.appendChild(h)};ee.prototype=Object.create(J.prototype),q.call(ee.prototype),ee.prototype.uninitialize=function(){this.viewer=null,J.prototype.uninitialize.call(this)};var te=function(e,t,i,n){var s=Autodesk.Viewing,a=(Autodesk.Viewing.Extensions.Measure,Autodesk.Viewing.MeasureCommon),o=["calibration"],r=e,l=new a.Measurement(a.MeasurementTypes.MEASUREMENT_DISTANCE),c=t||{},h=i,d=t.maxPrecision||5,u=null!=i.calibrationFactor,p=n,m=!1,g=!1,b=!1,v=null,f=!1,A=null,w=null,y=null,E=null,x=!1,T=[],C=null,k=0,M=!1,L=!1,S=!1,B=null,P=null,V=null,R=Autodesk.Viewing.GuiViewer3D&&e instanceof Autodesk.Viewing.GuiViewer3D;a=Autodesk.Viewing.MeasureCommon;function N(){switch(k){case 0:return null;case 1:case 2:return l.getPick(k);case 3:return l.getPick(l.countPicks())}}function D(){switch(k){case 0:return null;case 1:return l.getPick(l.countPicks());case 2:case 3:return l.getPick(1)}}function z(){k=0}function O(){k=3,l.indicator.changeAllEndpointsEditableStyle(!0)}function G(){return 0===k}function U(){return 3===k}this.register=function(){R&&!V&&(V=new _(this,r,"calibration-panel","Calibration",c),r.addPanel(V)),this.onCameraChangeBinded=this.onCameraChange.bind(this),this.screenSizeChangedBinded=this.screenSizeChanged.bind(this)},this.deregister=function(){this.deactivate(),V&&(r.removePanel(V),V.uninitialize(),V=null)},this.isActive=function(){return m},this.getNames=function(){return o},this.getName=function(){return o[0]},this.getPriority=function(){return 50},this.getCursor=function(){return g?null:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAYCAYAAAD+vg1LAAAAAXNSR0IArs4c6QAAAwZJREFUSA2tVEtLW0EUvjGJefoqSY0x0WBSiY+oNWiUINkU6ioLaaAlG1eudNVFoT+grgopiCkEIbUK1o0lusmurRSEWmmKG6MNtNhNosWqyU2CZPpN8cr15nFD7YHDzHnON2fOGYZhmHkw4XEW+wD4xkT4lMvl6CE0+Y2ohh+dz+cZn89HVS/5+n/d/wVMkXq9Xor2v5SBgsmymQwZHx+vOqlKpXKDXWI3eU6Tg+kqSjSh3W4/s9lsvzUajaNcAK3xY7Dyci3nd6WXSCS60dHRvMfjSRcKBfWV4SYbrVarB8p0PB5nY7HYmdVq/aDX67WlckpKKcvpOjs7X09OTvoPDw8z2Wy2Bu+imJqa+npycnJXGHOt3YRGoSyVSvvMZrNkYWFBs7GxkaoBAXFJcDJhcCW5rq5ur62trQ/EOhyOBhDT2Nj4qVKMqA31ve1yub7Rfufo/PycDA4OxpuamhqECaouhVqtfuD3+1tqa2uZQCCQDoVCWTwknVQDDvIKE1clI1ja09Ozg0cjx8fHpL+/P+50OhMU8f7+Punt7f2I5NdqXRXi9fV1z9jYWCuIWV5eziSTyWAqlXq1urqaw6AwOMiCG4lOYtEturu732xubhK0FQHSvfr6+lsog4HWPIPvIBqNErRiqCiwkkKpVFowZd8xZSQYDLImk+kJ52+xWJ4tLS3hU8yTkZGRBD2Ms4mu6Nun4XA4f3p6SoaGhuJ0+rgg/Bsmt9udYFmWzM3NZdDT05ztWsE5JV0R1AqUCfTt0fb2tjESiRRmZmaOUOcI3w9DY5mdnb03PDzMoDQ/MZFRzM20lO/E38vl8vt46UdAq0WNJWixlEwmu8B1bXioOxwjpgXJ0hMTE1og1qysrDghf+HnKtoD7c7u7i5ZXFzMGY3GF7iFuRR3dHTMr62tXWxtbZH29vZ3RYmECozu54ODAzpdP2hphHZOVigUVjChvgMDA+85fdm1q6vrrU6n+4WR9Zd1ujQ0Nzc/NBgMScSExXwZ2j5oL5Wo46UD/ZvxUemo+AdW1zJzUYr16wAAAABJRU5ErkJggg==), auto"},this.activate=function(){if(m=!0,g=!1,this.isEditingEndpoint=!1,this.editByDrag=!1,z(),r.toolController.activateTool(p.getName()),r.toolController.activateTool("magnifyingGlass"),l.indicator||l.attachIndicator(r,this,I),l.indicator.clear(),f&&y&&E){l.setPick(1,y.clone()),l.setPick(2,E.clone()),O();var e=Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(A,w);l.indicator.updateLabelValue(Autodesk.Viewing.Private.formatValueWithUnits(e,w,3,h.precision)),v=l.distanceXYZ,l.indicator.changeLabelClickableMode(!1),x=!0;var t=this.render();l.indicator.changeAllEndpointsEditableStyle(!0),t&&(V&&V.setPanelValue(A),this.showPanel())}r.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChangeBinded),r.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT,this.screenSizeChangedBinded)},this.deactivate=function(){m&&(m=!1,this.hidePanel(),this.updateViewportId(!0),x=!1,l.clearAllPicks(),p&&p.isActive()&&r.toolController.deactivateTool(p.getName()),r.toolController.deactivateTool("magnifyingGlass"),l.indicator&&(l.indicator.clear(),l.indicator.destroy(),l.indicator=null),r.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChangeBinded),r.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT,this.screenSizeChangedBinded))},this.getActivePointIndex=function(){return k},this.setCalibrationFactor=function(e){h.calibrationFactor=e},this.getCalibrationFactor=function(){return h.calibrationFactor},this.updateLabelValue=function(e){l.indicator.updateLabelValue(e)},this.isCalibrationValid=function(e,t){var i=Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(t,e);return!isNaN(i)},this.calibrate=function(e,t){var i=null,n=Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(t,e);if(!isNaN(n)){var s=Autodesk.Viewing.Private.convertUnits(r.model.getUnitString(),e,1,v);if(0!==s&&!isNaN(s)){i=n/s,h.calibrationFactor=i,h.units=e;var o=r.model.is2d()?3:1,c=Autodesk.Viewing.Private.calculatePrecision(t);h.precision=Math.max(h.precision?h.precision:o,c),A=t,w=e,u=!0,f=!0,y=l.getPick(1).clone(),E=l.getPick(2).clone()}}i&&(r.getExtension("Autodesk.Measure").enableCalibrationTool(!1),r.dispatchEvent({type:a.Events.FINISHED_CALIBRATION,units:e,scaleFactor:i}))},this.calibrateByScale=function(e,t){h.calibrationFactor=t,h.units!==e&&(h.units=e,w=e),u=!0},this.getCurrentUnits=function(){return h.units},this.hidePanel=function(){V?V.setVisible(!1):r.dispatchEvent({type:a.Events.CLOSE_CALIBRATION_PANEL_EVENT})},this.showPanel=function(){var e=this;V?(window.setTimeout(function(){V.requestedSizeTextbox.focus()},0),V.setVisible(!0),V.updatePanelPosition(l.indicator.labelPosition,l.indicator.p1,l.indicator.p2,l.indicator.calibrationLabel.clientHeight),window.addEventListener("keyup",function t(i){"Escape"==(i.key||String.fromCharCode(i.keyCode))&&e.isActive()&&(e.hidePanel(),e.clearSize(),e.showAddCalibrationLabel(),window.removeEventListener("keyup",t))})):r.dispatchEvent({type:a.Events.OPEN_CALIBRATION_PANEL_EVENT,data:{size:A,units:w}})},this.showAddCalibrationLabel=function(){l.indicator.showAddCalibrationLabel()},this.isCalibrated=function(){return u},this.clearSize=function(){l.indicator.updateLabelValue(null),V?V.requestedSizeTextbox.value="":r.dispatchEvent({type:a.Events.CLEAR_CALIBRATION_SIZE_EVENT})},this.getMaxPrecision=function(){return d},this.clearMeasurement=function(){z(),this.clearPick(1),this.clearPick(2),l.indicator.clear(),this.updateViewportId(!0),this.hidePanel(),x=!1},this.clearPick=function(e){l.hasPick(e)&&(l.clearPick(e),l.indicator.hideClick(e))},this.repickEndpoint=function(e){this.clearPick(e),this.editEndpoint(null,e)},this.getSnapper=function(){return p},this._handleMouseEvent=function(e){var t=!1;if(p.isSnapped())(U()||G())&&(this.clearMeasurement(),k=1),p.copyResults(N()),t=!0;else{if(e&&r.model.is2d()){var i=r.container.getBoundingClientRect(),n=e.canvasX||e.clientX-i.left,s=e.canvasY||e.clientY-i.top;n&&s&&(C=a.inverseProject({x:n,y:s},r))}if(L&&l&&!this.isEditingEndpoint&&k===l.getMaxNumberOfPicks()+1)return!0;var o=N();o&&o.clear()}if(this.correctPickPosition(),L&&this._doConsumeSingleClick(t),!G()){var c=this.render();l.hasPick(2)&&(t&=c)}return L&&(l.isComplete()&&t?(v=l.distanceXYZ,this.clearSize(),this.showPanel(),x=!0):(this.hidePanel(),l.indicator.updateLabelValue(null),x=!1)),t},this.updateViewportId=function(t){if(r.model&&r.model.is2d())if(t||G())e.impl.updateViewportId(0),p.setViewportId(null);else if(!b){var i=D().viewportIndex2d||N().viewportIndex2d;e.impl.updateViewportId(i),p&&p.setViewportId(i)}},this._doConsumeSingleClick=function(e){this.updateViewportId(l.isComplete()),l.indicator.clear()},this.handleButtonDown=function(e,t){return!s.isMobileDevice()&&(g=!0,0!==t||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(L=!0,B=e.canvasX,P=e.canvasY),!1)},this.handleMouseMove=function(e){return!s.isMobileDevice()&&(e.canvasX===B&&e.canvasY===P||(L=!1),M=this.isEditingEndpoint,G()||U()||(this.clearPick(k),this._handleMouseEvent(e)),p.indicator.render(),!1)},this.restoreMouseListeners=function(){r.toolController.getTool("gestures").controller.enableMouseButtons(!0)},this.handlePressHold=function(e){if(L=!1,s.isTouchDevice())switch(e.type){case"press":return b=!0,U()?this.clearMeasurement():this.clearPick(k),this._handleMouseEvent(e),p.indicator.render(),!0;case"pressup":return L=!0,this.restoreMouseListeners(),S=!S,this.handleSingleClick(e),b=!1,!0}return!1},this.correctPickPosition=function(){var t=N();if(t&&!t.getGeometry()&&C&&(t.geomType=a.SnapType.SNAP_VERTEX,t.geomVertex=C,t.intersectPoint=C),function(){switch(k){case 0:return!1;case 1:return l.hasPick(l.countPicks());case 2:case 3:return l.hasPick(1)}}()){var i=D();a.correctPerpendicularPicks(i,t,e,p)}},this.render=function(){var e=l.computeResult(l.picks,r,p);return l.indicator.render(l.picks,L||x),e},this.editEndpoint=function(e,t){if(k===t)return l.indicator.changeEndpointOnEditStyle(t,!1),void this.undoEditEndpoint();for(var i in k=t,this.isEditingEndpoint=!0,l.indicator.changeEndpointOnEditStyle(t,!0),l.indicator.changeAllEndpointsEditableStyle(!1),l.picks)l.picks.hasOwnProperty(i)&&(T[i]=l.getPick(i).clone());this.updateViewportId(),this.hidePanel(),l.indicator.updateLabelValue(null),x=!1,s.isMobileDevice()||this._handleMouseEvent(e)},this.undoEditEndpoint=function(){for(var e in l.indicator.clear(),l.picks)l.picks.hasOwnProperty(e)&&l.setPick(e,T[e].clone());this.updateViewportId(!0),this.isEditingEndpoint=!1,x=!0,O(),this.render()&&this.showPanel()},this.handleGesture=function(e){if(s.isTouchDevice()&&(L=!1,b))switch(this.clearPick(k),e.type){case"dragstart":case"dragmove":return this._handleMouseEvent(e),p.indicator.render(),!0;case"dragend":return b=!1,L=!0,this.editByDrag||(S=!S,this.handleSingleClick(e)),this.editByDrag=!1,this.restoreMouseListeners(),!0;case"pinchend":return L=!0,S=!S,this.handleSingleClick(e),this.restoreMouseListeners(),!0}return!1},this.handleButtonUp=function(e){return g=!1,B=null,P=null,M&&(L=!0,S=!S,this.handleSingleClick(e),M=!1),!1},this.handleSingleClick=function(e){return L&&(p.indicator.clearOverlays(),l.indicator.changeEndpointOnEditStyle(k,!1),this._handleMouseEvent(e)?(l.indicator.showEndpoints(),l.indicator.updateLabelsPosition(),k++):this.isEditingEndpoint?this.undoEditEndpoint():this.clearMeasurement(),l.isComplete()&&O(),L=!1,S=!S,this.isEditingEndpoint=!1,p.clearSnapped()),!0},this.handleDoubleClick=function(){return!0},this.handleSingleTap=function(e){return S||(L=!0,p.onMouseDown({x:e.canvasX,y:e.canvasY}),this.handleSingleClick(e)),S=!S,!0},this.handleDoubleTap=function(){return!0},this.handleResize=function(){l.indicator&&l.indicator.handleResize()},this.onCameraChange=function(){p.indicator&&p.indicator.onCameraChange()},this.screenSizeChanged=function(e){this.onCameraChange()}},ie=Autodesk.Viewing,ne=Autodesk.Viewing.UI,se=Autodesk.Viewing.Private,ae=Autodesk.Viewing.MeasureCommon;function oe(e){this.measureExtension=e,this.measureTool=this.measureExtension.measureTool,this.viewer=this.measureExtension.viewer,this.visible=!1,this.buttonsList=[]}var re=oe.prototype;re.init=function(){var e=this,t=this.viewer.getToolbar(),i=t.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID),n={};n.index=t.indexOf(i)+1,this.measureToolbar=new ne.ControlGroup(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID),t.addControl(this.measureToolbar,n),this.measureSimpleDistanceBtn=new ne.Button("toolbar-measureTool-simple-distance"),this.measureSimpleDistanceBtn.setToolTip("Distance"),this.measureSimpleDistanceBtn.setIcon("adsk-icon-measure-distance-new"),this.measureSimpleDistanceBtn.onClick=function(){e.measureSimpleDistanceBtn.getState()!==ne.Button.State.ACTIVE?e.measureExtension.activate("distance"):e.measureTool.deselectAllMeasurements()},this.measureToolbar.addControl(this.measureSimpleDistanceBtn),this.buttonsList[ae.MeasurementTypes.MEASUREMENT_DISTANCE]=this.measureSimpleDistanceBtn,this.measureAngleBtn=new ne.Button("toolbar-measureTool-angle"),this.measureAngleBtn.setToolTip("Angle"),this.measureAngleBtn.setIcon("adsk-icon-measure-angle-new"),this.measureAngleBtn.onClick=function(){e.measureAngleBtn.getState()!==ne.Button.State.ACTIVE?e.measureExtension.activate("angle"):e.measureTool.deselectAllMeasurements()},this.measureToolbar.addControl(this.measureAngleBtn),this.buttonsList[ae.MeasurementTypes.MEASUREMENT_ANGLE]=this.measureAngleBtn,this.viewer.model&&this.viewer.model.is2d()&&(this.measureAreaBtn=new ne.Button("toolbar-measureTool-area"),this.measureAreaBtn.setToolTip("Area"),this.measureAreaBtn.setIcon("adsk-icon-measure-area-new"),this.measureAreaBtn.onClick=function(){e.measureAreaBtn.getState()!==ne.Button.State.ACTIVE?e.measureExtension.activate("area"):e.measureTool.deselectAllMeasurements()},this.measureToolbar.addControl(this.measureAreaBtn),this.buttonsList[ae.MeasurementTypes.MEASUREMENT_AREA]=this.measureAreaBtn),this.calibrationToolBtn=new ne.Button("toolbar-calibrationTool"),this.calibrationToolBtn.setToolTip("Calibrate"),this.calibrationToolBtn.setIcon("adsk-icon-measure-calibration"),this.calibrationToolBtn.onClick=function(t){e.calibrationToolBtn.getState()!==ne.Button.State.ACTIVE?e.measureExtension.activate("calibrate"):e.measureExtension.enableCalibrationTool(!1)},this.measureToolbar.addControl(this.calibrationToolBtn),this.buttonsList[ae.MeasurementTypes.CALIBRATION]=this.calibrationToolBtn;var s=document.createElement("div");s.className="measure-toolbar-seperator",this.measureToolbar.container.appendChild(s),this.deleteBtn=new ne.Button("toolbar-delete"),this.deleteBtn.setToolTip("Delete measurement"),this.deleteBtn.setIcon("adsk-icon-measure-trash"),this.deleteBtn.onClick=function(){e.measureExtension.deleteCurrentMeasurement()},this.measureToolbar.addControl(this.deleteBtn),this.settingsBtn=new ne.Button("toolbar-settings"),this.settingsBtn.setToolTip("Measure settings"),this.settingsBtn.setIcon("adsk-icon-measure-settings"),this.settingsControlPanel=document.createElement("div"),this.settingsControlPanel.classList.add("docking-panel"),this.settingsControlPanel.classList.add("docking-panel-container-solid-color-b"),this.settingsControlPanel.classList.add("measure-settings-popup"),this.settingsControlPanel.classList.add("hide"),this.settingsBtn.onClick=function(e){this.settingsControlPanel.classList.contains("hide")?(this.settingsControlPanel.classList.remove("hide"),this.setButtonActive(this.settingsBtn)):(this.settingsControlPanel.classList.add("hide"),this.setButtonInactive(this.settingsBtn))}.bind(this),this.measureToolbar.container.appendChild(this.settingsControlPanel),this.settingsControlPanel.root=this.settingsBtn,this.measureToolbar.addControl(this.settingsBtn),this.table=document.createElement("table"),this.table.classList.add("adsk-lmv-tftable"),this.table.classList.add("calibration-table"),this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.settingsControlPanel.appendChild(this.table),this.units=[{name:"Unknown",units:"",matches:[""]},{name:"Decimal feet",units:"decimal-ft",matches:["ft","decimal-ft"]},{name:"Feet and fractional inches",units:"ft-and-fractional-in",matches:["ft-and-fractional-in"]},{name:"Feet and decimal inches",units:"ft-and-decimal-in",matches:["ft-and-decimal-in"]},{name:"Decimal inches",units:"decimal-in",matches:["in","decimal-in"]},{name:"Fractional inches",units:"fractional-in",matches:["fractional-in"]},{name:"Meters",units:"m",matches:["m"]},{name:"Centimeters",units:"cm",matches:["cm"]},{name:"Millimeters",units:"mm",matches:["mm"]},{name:"Meters and centimeters",units:"m-and-cm",matches:["m-and-cm"]},{name:"Points",units:"pt",matches:["pt"]}];var a=this.findUnits(),o=[];ie.isSafari()&&this.viewer.model.getDisplayUnit()&&this.units.shift();for(var r=0;r<this.units.length;++r)o.push(this.units[r].name);this.unitList=new se.OptionDropDown("Unit type",this.tbody,o,a,null,{paddingLeft:0,paddingRight:15}),this.unitList.addEventListener("change",function(t){var i=e.unitList.selectedIndex,n=e.units[i].units;e.measureTool.setUnits(n),e.setupPrecision(),se.logger.track({category:"pref_changed",name:"measure/units",value:n})}),this.precisionList=new se.OptionDropDown("Precision",this.tbody,[],-1,null,{paddingLeft:0,paddingRight:15}),this.precisionList.addEventListener("change",function(t){var i=e.precisionList.selectedIndex;e.measureTool.setPrecision(i),se.logger.track({category:"pref_changed",name:"measure/precision",value:i})}),this.isolate=new se.OptionCheckbox("Isolate measurement",this.tbody,!1),this.isolate.addEventListener("change",function(t){var i=e.isolate.checked;e.measureTool.setIsolateMeasure(i),i?e.measureTool.isolateMeasurement():e.measureTool.clearIsolate(),se.logger.track({category:"pref_changed",name:"measure/isolate",value:i})}),this.setupPrecision(),this.updateSettingsPanel(),this.viewer.model&&this.viewer.model.is2d()&&this.isolate.setVisibility(!1),this.measureExtension.sharedMeasureConfig.units?Autodesk.Viewing.isSafari()||this.disableUnitOption(0):this.disableUnitOption(),this.measureDoneBtn=new ne.Button("toolbar-measureTool-done");var l=Autodesk.Viewing.i18n.translate("Done");this.measureDoneBtn.setToolTip(l);var c=document.createElement("label");c.textContent=l;var h=this.measureDoneBtn.container;h.appendChild(c),h.classList.add("adsk-label-button");var d=h.getElementsByClassName("adsk-button-icon");d&&d[0]&&(d[0].style.display="none"),this.measureDoneBtn.onClick=function(){this.measureExtension.exitMeasurementMode()}.bind(this),this.measureToolbar.addControl(this.measureDoneBtn),this.measureToolbar.setVisible(!1)},re.destroy=function(){this.visible&&this.closeToolbar(),this.measureToolbar&&(this.measureToolbar.removeFromParent(),this.measureToolbar=null)},re.closeToolbar=function(){this.measureExtension.enableMeasureTool(!1),this.measureExtension.enableCalibrationTool(!1),this.toggleVisible();for(var e=this.viewer.getToolbar(),t=e.container,i=t.children.length,n=0;n<i;++n)t.children[n].style.display="";e.getControl(ie.TOOLBAR.MODELTOOLSID).addControl(this.measureExtension.measurementToolbarButton,{index:this.measureExtension.measurementToolbarButton.index})},re.toggleVisible=function(){this.visible=!this.visible,this.measureToolbar.setVisible(this.visible),this.visible||(this.settingsControlPanel.classList.add("hide"),this.setButtonInactive(this.settingsBtn))},re.setButtonActive=function(e){e.setState(ne.Button.State.ACTIVE)},re.setButtonInactive=function(e){e.setState(ne.Button.State.INACTIVE)},re.deactivateAllButtons=function(){for(var e in this.buttonsList)if(this.buttonsList.hasOwnProperty(e)){var t=this.buttonsList[e];this.setButtonInactive(t)}},re.activateButtonByType=function(e){this.setButtonActive(this.buttonsList[e])},re.setupPrecision=function(){for(;this.precisionList.dropdownElement.lastChild;)this.precisionList.dropdownElement.removeChild(this.precisionList.dropdownElement.lastChild);var e,t=this.measureTool.getUnits();e="ft-and-fractional-in"===t||"fractional-in"===t?["1","1/2","1/4","1/8","1/16","1/32","1/64"]:["0","0.1","0.01","0.001","0.0001","0.00001"];for(var i=0;i<e.length;++i){var n=document.createElement("option");n.value=i,n.textContent=e[i],this.precisionList.dropdownElement.appendChild(n)}var s=this.measureTool.getPrecision();e.length<=s&&(s=e.length-1,this.measureTool.setPrecision(s)),this.precisionList.dropdownElement.selectedIndex=s},re.findUnits=function(){var e,t,i=this.measureTool.getUnits();for(e=0;e<this.units.length;++e){var n=this.units[e].matches;if(n)for(t=0;t<n.length;++t)if(n[t]===i)return e}return 0},re.disableUnitOption=function(e){null!=e?(this.unitList.dropdownElement.children[e].style.display="none",ie.isIE11&&(this.unitList.dropdownElement.children[e].disabled=!0,this.unitList.dropdownElement.children[e].style.visibility="hidden")):this.unitList.dropdownElement.disabled=!0},re.updateSettingsPanel=function(){this.unitList.dropdownElement.selectedIndex=this.findUnits(),this.precisionList.dropdownElement.selectedIndex=this.measureTool.getPrecision(),this.setupPrecision()};i(283),i(286);i.d(t,"MeasureExtension",function(){return me});var le=AutodeskNamespace("Autodesk.Viewing.Extensions.Measure"),ce=Autodesk.Viewing,he=Autodesk.Viewing.Private,de=ce.UI,ue=Autodesk.Viewing.MeasureCommon,pe=ue.MeasurementTypes.MEASUREMENT_DISTANCE,me=function(e,t){Autodesk.Viewing.Extension.call(this,e,t),this.modes=["distance","angle","area","calibrate"],this.name="measure",this._onModelLoaded=this._onModelLoaded.bind(this)};me.prototype=Object.create(Autodesk.Viewing.Extension.prototype),me.prototype.constructor=me,me.prototype.load=function(){var e=this,t=this.viewer;if(this.hasUI=Autodesk.Viewing.GuiViewer3D&&t instanceof Autodesk.Viewing.GuiViewer3D,this.escapeHotkeyId="Autodesk.Measure.Hotkeys.Escape",!t.toolController)return!1;this.options=this.options||{};var i={onCloseCallback:function(){e.enableMeasureTool(!1)}};return this.sharedMeasureConfig={units:null,precision:null,calibrationFactor:null},i.snapperOptions=this.options.snapperOptions,this.forceCalibrate=this.options.forceCalibrate,this.snapper=new ue.Snapper(t,{renderSnappedTopology:!0}),t.toolController.registerTool(this.snapper),this.measureTool=new V(t,i,this.sharedMeasureConfig,this.snapper),t.toolController.registerTool(this.measureTool),this.calibrationTool=new te(t,this.options,this.sharedMeasureConfig,this.snapper),t.toolController.registerTool(this.calibrationTool),this.magnifyingGlass=new function(e){var t=e,i=!1,n=["magnifyingGlass"],s=!1,a=null,o=null,r=null,l=null,c=null,h=!1,d=Autodesk.Viewing;this.isActive=function(){return i},this.activate=function(){i=!0,this.updateMagnifyingGlassBinded=this.updateMagnifyingGlass.bind(this)},this.updateMagnifyingGlass=function(){if(h)a&&a.classList.remove("visible"),h=!1;else{var e=window.devicePixelRatio,i=120*e,n=e*(l-30),s=e*(c-30);a||((a=document.createElement("canvas")).className="magnifying-glass",a.width=i,a.height=i,a.style.width="120px",a.style.height="120px",a.getContext("2d").translate(0,i),a.getContext("2d").scale(1,-1),t.container.appendChild(a),o=a.getContext("2d").createImageData(Math.ceil(i/2),Math.ceil(i/2)),r=new Uint8Array(o.data.buffer));var d=a.getContext("2d"),u=t.canvas.getContext("webgl")||t.canvas.getContext("experimental-webgl");u.readPixels(n,t.canvas.height-s-o.height,o.width,o.height,u.RGBA,u.UNSIGNED_BYTE,r),d.putImageData(o,0,0),d.drawImage(a,0,0,o.width,o.height,0,0,i,i),this.setGlassPosition(a,l,c,120,15),a.classList.toggle("visible",!0)}},this.deactivate=function(){this.clearMagnifyingGlass(),i=!1},this.getNames=function(){return n},this.getName=function(){return n[0]},this.getPriority=function(){return 70},this.setGlassPosition=function(e,t,i,n,s){e.style.left=t-n/2+"px",e.style.top=i-n-s>0?i-n-s+"px":i+s+"px"},this.requestUpdate=function(){t.hasEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT,this.updateMagnifyingGlassBinded)||t.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT,this.updateMagnifyingGlassBinded,{once:!0})},this.drawMagnifyingGlass=function(e,i){l=e,c=i,t.impl.invalidate(!1,!1,!0),this.requestUpdate()},this.clearMagnifyingGlass=function(){h=!0,this.requestUpdate()},this.handlePressHold=function(e){if(d.isTouchDevice())switch(e.type){case"press":s=!0,this.drawMagnifyingGlass(e.canvasX,e.canvasY);break;case"pressup":this.clearMagnifyingGlass(),s=!1}return!1},this.handleGesture=function(e){if(s&&d.isTouchDevice())switch(e.type){case"dragstart":case"dragmove":this.drawMagnifyingGlass(e.canvasX,e.canvasY);break;case"dragend":this.clearMagnifyingGlass(),s=!1;break;case"pinchstart":case"pinchmove":this.drawMagnifyingGlass(e.canvasX,e.canvasY);break;case"pinchend":this.clearMagnifyingGlass()}return!1},this.handleMouseMove=function(e){return!1},this.handleWheelInput=function(e){return!1},this.handleButtonUp=function(e,t){return!1}}(t),t.toolController.registerTool(this.magnifyingGlass),this.onFinishedCalibration=function(){e.measureToolbar&&e.measureToolbar.updateSettingsPanel(),e.activateInitiator&&e.activateInitiator()},t.addEventListener("finished-calibration",this.onFinishedCalibration),this.onMeasurementChanged=function(t){var i=t.data.type;e.changeMeasurementType(i)},t.addEventListener(ue.Events.MEASUREMENT_CHANGED_EVENT,this.onMeasurementChanged),t.model?this._onModelLoaded({model:t.model}):t.addEventListener(ce.MODEL_ROOT_LOADED_EVENT,this._onModelLoaded,{once:!0}),this.onModelRemoved=function(){e.measurementToolbarButton&&(e.viewer.model||(e.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.DISABLED),e.exitMeasurementMode()))},this.onModelAdded=function(){e.measurementToolbarButton&&(1===e.viewer.getVisibleModels().length&&e.measurementToolbarButton&&e.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE))},t.addEventListener(ce.MODEL_ADDED_EVENT,this.onModelAdded),t.addEventListener(ce.MODEL_REMOVED_EVENT,this.onModelRemoved),this.viewer.loadExtension("Autodesk.CompGeom")},me.prototype._onModelLoaded=function(e){var t=e.model;this.sharedMeasureConfig.units=this.options.calibrationUnits||t.getDisplayUnit(),this.sharedMeasureConfig.precision=t.is2d()?3:1,this.options.calibrationUnits&&!isNaN(this.options.calibrationFactor)&&this.calibrationTool.calibrateByScale(this.options.calibrationUnits,this.options.calibrationFactor)},me.prototype.unload=function(){var e=this.viewer;return this.destroyUI(),e.removeEventListener("finished-calibration",this.onFinishedCalibration),e.removeEventListener(ue.Events.MEASUREMENT_CHANGED_EVENT,this.onMeasurementChanged),e.removeEventListener(ce.MODEL_ADDED_EVENT,this.onModelAdded),e.removeEventListener(ce.MODEL_REMOVED_EVENT,this.onModelRemoved),e.removeEventListener(ce.MODEL_ROOT_LOADED_EVENT,this._onModelLoaded),e.toolController.deregisterTool(this.snapper),this.snapper=null,e.toolController.deregisterTool(this.measureTool),this.measureTool=null,e.toolController.deregisterTool(this.calibrationTool),this.calibrationTool=null,e.toolController.deregisterTool(this.magnifyingGlass),this.magnifyingGlass=null,this.unloaded=!0,!0},me.prototype.setActive=function(e){return this.enableMeasureTool(e)},me.prototype.toggle=function(){return this.isActive()?this.enableMeasureTool(!1):this.enableMeasureTool(!0),this.isActive()},me.prototype.getMeasurement=function(e,t){var i=null;return this.measureTool.isActive()&&(i=this.measureTool.getMeasurement(e,t)),i},me.prototype.getUnitOptions=function(){return[{name:"Unknown",type:""},{name:"Decimal feet",type:"decimal-ft"},{name:"Feet and fractional inches",type:"ft"},{name:"Feet and decimal inches",type:"ft-and-decimal-in"},{name:"Decimal inches",type:"decimal-in"},{name:"Fractional inches",type:"fractional-in"},{name:"Meters",type:"m"},{name:"Centimeters",type:"cm"},{name:"Millimeters",type:"mm"},{name:"Meters and centimeters",type:"m-and-cm"},{name:"Points",type:"pt"}]},me.prototype.getPrecisionOptions=function(e){return e?["1","1/2","1/4","1/8","1/16","1/32","1/64"]:["0","0.1","0.01","0.001","0.0001","0.00001"]},me.prototype.getDefaultUnit=function(){return this.viewer.model.getDisplayUnit()},me.prototype.openCalibrationRequiredDialog=function(e){this.hasUI?(this.CalibrationRequiredDialog||(this.CalibrationRequiredDialog=new ee(this,this.viewer,"calibration-required","Calibration Required",this.options)),this.CalibrationRequiredDialog.setVisible(!0)):this.viewer.dispatchEvent({type:ue.Events.CALIBRATION_REQUIRED_EVENT}),"measure"===e?this.activateInitiator=function(){this.enableMeasureTool(!0,pe),this.activateInitiator=null}:"dimension"===e&&(this.activateInitiator=function(){this.viewer.dispatchEvent({type:ue.Events.FINISHED_CALIBRATION_FOR_DIMENSION_EVENT}),this.activateInitiator=null})},me.prototype.activate=function(e){if(this.activeStatus&&this.mode===e)return!0;var t;switch(this.enterMeasurementMode(),e){default:e="distance";case"distance":t=this.enableMeasureTool(!0,ue.MeasurementTypes.MEASUREMENT_DISTANCE);break;case"angle":t=this.enableMeasureTool(!0,ue.MeasurementTypes.MEASUREMENT_ANGLE);break;case"area":this.viewer.model.is2d()?t=this.enableMeasureTool(!0,ue.MeasurementTypes.MEASUREMENT_AREA):console.warn("Area mode is applicable on 2D models only");break;case"calibrate":t=this.enableCalibrationTool(!0)}return this.mode=t?e:"",this.activeStatus=!0,!0},me.prototype.deactivate=function(){return this.activeStatus&&(this.exitMeasurementMode(),this.enableMeasureTool(!1),this.activeStatus=!1),!0},me.prototype.enableMeasureTool=function(e,t){if(t===ue.MeasurementTypes.MEASUREMENT_AREA&&this.viewer.model&&!this.viewer.model.is2d())return!1;var i=this.viewer.toolController,n=1===this.selectedTool;return!this.viewer.model||!e&&n?(this.measureTool.isActive()&&(i.deactivateTool("measure"),this.measureToolbar&&this.measureToolbar.deactivateAllButtons(),this.selectedTool=0),!0):(this.forceCalibrate|=this.viewer.model.getData().isLeaflet,t||(t=pe),e&&!n?(this.checkAndFetchTopology(i.getTool("measure")),!this.forceCalibrate||this.forceCalibrate&&this.calibrationTool.isCalibrated()||t===ue.MeasurementTypes.MEASUREMENT_ANGLE?(this.calibrationTool.isActive()&&i.deactivateTool("calibration"),this.measureToolbar&&this.measureToolbar.updateSettingsPanel(),i.activateTool("measure"),this.selectedTool=1,this.changeMeasurementType(t),!0):(this.viewer.addEventListener(le.OPEN_TOOL_AFTER_CALIBRAION,function(){this.enableMeasureTool(!0)}.bind(this),{once:!0}),this.openCalibrationRequiredDialog("measure"),!1)):!(!e||!n)&&(!this.forceCalibrate||this.forceCalibrate&&this.calibrationTool.isCalibrated()||t===ue.MeasurementTypes.MEASUREMENT_ANGLE?(this.changeMeasurementType(t),!0):(this.openCalibrationRequiredDialog("measure"),!1)))},me.prototype.changeMeasurementType=function(e){this.measureTool.changeMeasurementType(e),this.measureToolbar&&(this.measureToolbar.deactivateAllButtons(),this.measureToolbar.activateButtonByType(e))},me.prototype.enableCalibrationTool=function(e){var t=this.viewer.toolController,i=2==this.selectedTool;return e&&!i?(this.measureTool.isActive()&&t.deactivateTool("measure"),t.activateTool("calibration"),this.viewer.dispatchEvent({type:ue.Events.UNITS_CALIBRATION_STARTS_EVENT}),this.measureToolbar&&(this.measureToolbar.deactivateAllButtons(),this.measureToolbar.activateButtonByType(ue.MeasurementTypes.CALIBRATION)),this.selectedTool=2,!0):!(e||!i)&&(this.calibrationTool.isActive()&&(this.mode="",t.deactivateTool("calibration"),this.measureToolbar&&this.measureToolbar.deactivateAllButtons()),this.selectedTool=0,!0)},me.prototype.enterMeasurementMode=function(){if(!this._measurementMode&&(this._measurementMode=!0,this.viewer.getToolbar)){for(var e=this.viewer.getToolbar(),t=e.container,i=t.children.length,n=0;n<i;++n)t.children[n].style.display="none";this.navigationControls=e.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID),this.navigationControls.setVisible(!0),this.navigationControls.container.style.display="",this.measureControls=e.getControl(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID),this.measureControls.setVisible(!0),this.measureControls.container.style.display="";var s=this.measurementToolbarButton.getId();this.measurementToolbarButton.index=this.measurementToolbarButton.parent.indexOf(s),this.measurementToolbarButton.parent.removeControl(s),this.measureToolbar.toggleVisible(),this.viewer.centerToolBar&&this.viewer.centerToolBar(),this.enableMeasureTool(!0,pe)}},me.prototype.exitMeasurementMode=function(){this._measurementMode&&(this.measureToolbar&&this.measureToolbar.closeToolbar(),this.CalibrationRequiredDialog&&this.CalibrationRequiredDialog.isVisible()&&this.CalibrationRequiredDialog.setVisible(!1),this._measurementMode=!1)},me.prototype.onToolbarCreated=function(e){if(!this.measureToolbar){var t=this,i=this.viewer,n=e.getControl(ce.TOOLBAR.MODELTOOLSID);this.measurementToolbarButton=new de.Button("toolbar-measurementSubmenuTool"),this.measurementToolbarButton.setToolTip("Measure"),this.measurementToolbarButton.setIcon("adsk-icon-measure"),n.measurementToolbarButton=this.measurementToolbarButton,n.addControl(this.measurementToolbarButton,{index:0});var s=this.viewer.model?Autodesk.Viewing.UI.Button.State.INACTIVE:Autodesk.Viewing.UI.Button.State.DISABLED;this.measurementToolbarButton.setState(s),this.measureToolbar=new oe(this),this.measureToolbar.init(),this.measurementToolbarButton.onClick=this.activate.bind(this);var a=[{keycodes:[Autodesk.Viewing.KeyCode.ESCAPE],onRelease:function(){if(t._measurementMode)return t.exitMeasurementMode(),!0}}];i.getHotkeyManager().pushHotkeys(this.escapeHotkeyId,a)}},me.prototype.checkAndFetchTopology=function(e){this._checkedTopology||(this._checkedTopology=!0,this.viewer.model.is3d()?this.viewer.modelHasTopology()?e&&e.setTopologyAvailable():(e&&e.setFetchingTopology(),this.viewer.model.fetchTopology().then(function(t){e&&e.setTopologyAvailable()}).catch(function(t){he.logger.log(t),e&&e.setNoTopology()})):e&&e.setNoTopology())},me.prototype.destroyUI=function(){var e=this.viewer;this.measureToolbar&&(this.measureToolbar.destroy(),this.measureToolbar=null),this.measurementToolbarButton&&(this.measurementToolbarButton.removeFromParent(),this.measurementToolbarButton=null),e.getHotkeyManager().popHotkeys(this.escapeHotkeyId)},me.prototype.setUnits=function(e){this.measureTool.setUnits(e)},me.prototype.getUnits=function(){return this.measureTool.getUnits()},me.prototype.setPrecision=function(e){this.measureTool.setPrecision(e)},me.prototype.getPrecision=function(){return this.measureTool.getPrecision()},me.prototype.calibrate=function(e,t){this.calibrationTool.calibrate(e,t)},me.prototype.calibrateByScale=function(e,t){this.calibrationTool.calibrateByScale(e,t)},me.prototype.isCalibrationValid=function(e,t){return this.calibrationTool.isCalibrationValid(e,t)},me.prototype.getCalibrationFactor=function(){return this.calibrationTool.getCalibrationFactor()},me.prototype.showAddCalibrationLabel=function(){this.calibrationTool.showAddCalibrationLabel()},me.prototype.deleteCurrentMeasurement=function(){this.measureTool.deleteCurrentMeasurement()},me.prototype.selectMeasurementById=function(e){this.measureTool.selectMeasurementById(e)},ce.theExtensionManager.registerExtension("Autodesk.Measure",me)},9:function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}}});
//# sourceMappingURL=Measure.min.js.map